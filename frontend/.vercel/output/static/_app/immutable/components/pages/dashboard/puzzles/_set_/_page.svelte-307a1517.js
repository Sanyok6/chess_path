import{S as Ji,i as Xi,s as $i,e as Wo,b as X,J as st,h as u,K as el,o as tl,R as xo,W as Go,k as S,H as W,a as L,q as Q,l as y,m as g,I as x,c as z,r as V,n as l,C as s,p as Lt,L as Yo,P as wt,X as Br,Y as Zo,D as pe,Q as rl,T as Jo,u as Un,U as nl,O as ol}from"../../../../../chunks/index-1680125d.js";import{a as sr,f as il}from"../../../../../chunks/api-a4ebcd18.js";import{p as ll}from"../../../../../chunks/stores-8e90d739.js";import{u as al}from"../../../../../chunks/store-8478c103.js";import{g as Xo}from"../../../../../chunks/navigation-89fb79a1.js";var Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};const sl=["white","black"],qn=["a","b","c","d","e","f","g","h"],Hn=["1","2","3","4","5","6","7","8"],cl=[...Hn].reverse(),Fn=Array.prototype.concat(...qn.map(e=>Hn.map(t=>e+t))),We=e=>Fn[8*e[0]+e[1]],ye=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],_i=Fn.map(ye);function ul(e){let t;const r=()=>(t===void 0&&(t=e()),t);return r.clear=()=>{t=void 0},r}const fl=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},Qn=e=>e==="white"?"black":"white",pr=(e,t)=>{const r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},Kn=(e,t)=>e.role===t.role&&e.color===t.color,vr=e=>(t,r)=>[(r?t[0]:7-t[0])*e.width/8,(r?7-t[1]:t[1])*e.height/8],it=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},wi=(e,t,r=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${r})`},Vn=(e,t)=>{e.style.visibility=t?"visible":"hidden"},Ut=e=>{var t;if(e.clientX||e.clientX===0)return[e.clientX,e.clientY];if(!((t=e.targetTouches)===null||t===void 0)&&t[0])return[e.targetTouches[0].clientX,e.targetTouches[0].clientY]},Si=e=>e.buttons===2||e.button===2,at=(e,t)=>{const r=document.createElement(e);return t&&(r.className=t),r};function yi(e,t,r){const n=ye(e);return t||(n[0]=7-n[0],n[1]=7-n[1]),[r.left+r.width*n[0]/8+r.width/16,r.top+r.height*(7-n[1])/8+r.height/16]}const Dt=(e,t)=>Math.abs(e-t),dl=e=>(t,r,n,o)=>Dt(t,n)<2&&(e==="white"?o===r+1||r<=1&&o===r+2&&t===n:o===r-1||r>=6&&o===r-2&&t===n),Ei=(e,t,r,n)=>{const o=Dt(e,r),i=Dt(t,n);return o===1&&i===2||o===2&&i===1},Pi=(e,t,r,n)=>Dt(e,r)===Dt(t,n),ki=(e,t,r,n)=>e===r||t===n,Ci=(e,t,r,n)=>Pi(e,t,r,n)||ki(e,t,r,n),hl=(e,t,r)=>(n,o,i,a)=>Dt(n,i)<2&&Dt(o,a)<2||r&&o===a&&o===(e==="white"?0:7)&&(n===4&&(i===2&&t.includes(0)||i===6&&t.includes(7))||t.includes(i));function pl(e,t){const r=t==="white"?"1":"8",n=[];for(const[o,i]of e)o[1]===r&&i.color===t&&i.role==="rook"&&n.push(ye(o)[0]);return n}function Ai(e,t,r){const n=e.get(t);if(!n)return[];const o=ye(t),i=n.role,a=i==="pawn"?dl(n.color):i==="knight"?Ei:i==="bishop"?Pi:i==="rook"?ki:i==="queen"?Ci:hl(n.color,pl(e,n.color),r);return _i.filter(c=>(o[0]!==c[0]||o[1]!==c[1])&&a(o[0],o[1],c[0],c[1])).map(We)}function Ue(e,...t){e&&setTimeout(()=>e(...t),1)}function vl(e){e.orientation=Qn(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function gl(e,t){for(const[r,n]of t)n?e.pieces.set(r,n):e.pieces.delete(r)}function ml(e,t){if(e.check=void 0,t===!0&&(t=e.turnColor),t)for(const[r,n]of e.pieces)n.role==="king"&&n.color===t&&(e.check=r)}function bl(e,t,r,n){kt(e),e.premovable.current=[t,r],Ue(e.premovable.events.set,t,r,n)}function Pt(e){e.premovable.current&&(e.premovable.current=void 0,Ue(e.premovable.events.unset))}function _l(e,t,r){Pt(e),e.predroppable.current={role:t,key:r},Ue(e.predroppable.events.set,t,r)}function kt(e){const t=e.predroppable;t.current&&(t.current=void 0,Ue(t.events.unset))}function wl(e,t,r){if(!e.autoCastle)return!1;const n=e.pieces.get(t);if(!n||n.role!=="king")return!1;const o=ye(t),i=ye(r);if(o[1]!==0&&o[1]!==7||o[1]!==i[1])return!1;o[0]===4&&!e.pieces.has(r)&&(i[0]===6?r=We([7,i[1]]):i[0]===2&&(r=We([0,i[1]])));const a=e.pieces.get(r);return!a||a.color!==n.color||a.role!=="rook"?!1:(e.pieces.delete(t),e.pieces.delete(r),o[0]<i[0]?(e.pieces.set(We([6,i[1]]),n),e.pieces.set(We([5,i[1]]),a)):(e.pieces.set(We([2,i[1]]),n),e.pieces.set(We([3,i[1]]),a)),!0)}function Ti(e,t,r){const n=e.pieces.get(t),o=e.pieces.get(r);if(t===r||!n)return!1;const i=o&&o.color!==n.color?o:void 0;return r===e.selected&&xe(e),Ue(e.events.move,t,r,i),wl(e,t,r)||(e.pieces.set(r,n),e.pieces.delete(t)),e.lastMove=[t,r],e.check=void 0,Ue(e.events.change),i||!0}function jn(e,t,r,n){if(e.pieces.has(r))if(n)e.pieces.delete(r);else return!1;return Ue(e.events.dropNewPiece,t,r),e.pieces.set(r,t),e.lastMove=[r],e.check=void 0,Ue(e.events.change),e.movable.dests=void 0,e.turnColor=Qn(e.turnColor),!0}function Ii(e,t,r){const n=Ti(e,t,r);return n&&(e.movable.dests=void 0,e.turnColor=Qn(e.turnColor),e.animation.current=void 0),n}function Oi(e,t,r){if(Wn(e,t,r)){const n=Ii(e,t,r);if(n){const o=e.hold.stop();xe(e);const i={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return n!==!0&&(i.captured=n),Ue(e.movable.events.after,t,r,i),!0}}else if(yl(e,t,r))return bl(e,t,r,{ctrlKey:e.stats.ctrlKey}),xe(e),!0;return xe(e),!1}function Ni(e,t,r,n){const o=e.pieces.get(t);o&&(Sl(e,t,r)||n)?(e.pieces.delete(t),jn(e,o,r,n),Ue(e.movable.events.afterNewPiece,o.role,r,{premove:!1,predrop:!1})):o&&El(e,t,r)?_l(e,o.role,r):(Pt(e),kt(e)),e.pieces.delete(t),xe(e)}function Ln(e,t,r){if(Ue(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled){xe(e),e.hold.cancel();return}else if((e.selectable.enabled||r)&&e.selected!==t&&Oi(e,e.selected,t)){e.stats.dragged=!1;return}}(e.selectable.enabled||e.draggable.enabled)&&(Bi(e,t)||xn(e,t))&&(Mi(e,t),e.hold.start())}function Mi(e,t){e.selected=t,xn(e,t)?e.premovable.dests=Ai(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function xe(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function Bi(e,t){const r=e.pieces.get(t);return!!r&&(e.movable.color==="both"||e.movable.color===r.color&&e.turnColor===r.color)}const Wn=(e,t,r)=>{var n,o;return t!==r&&Bi(e,t)&&(e.movable.free||!!(!((o=(n=e.movable.dests)===null||n===void 0?void 0:n.get(t))===null||o===void 0)&&o.includes(r)))};function Sl(e,t,r){const n=e.pieces.get(t);return!!n&&(t===r||!e.pieces.has(r))&&(e.movable.color==="both"||e.movable.color===n.color&&e.turnColor===n.color)}function xn(e,t){const r=e.pieces.get(t);return!!r&&e.premovable.enabled&&e.movable.color===r.color&&e.turnColor!==r.color}const yl=(e,t,r)=>t!==r&&xn(e,t)&&Ai(e.pieces,t,e.premovable.castle).includes(r);function El(e,t,r){const n=e.pieces.get(t),o=e.pieces.get(r);return!!n&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&(n.role!=="pawn"||r[1]!=="1"&&r[1]!=="8")&&e.movable.color===n.color&&e.turnColor!==n.color}function Pl(e,t){const r=e.pieces.get(t);return!!r&&e.draggable.enabled&&(e.movable.color==="both"||e.movable.color===r.color&&(e.turnColor===r.color||e.premovable.enabled))}function kl(e){const t=e.premovable.current;if(!t)return!1;const r=t[0],n=t[1];let o=!1;if(Wn(e,r,n)){const i=Ii(e,r,n);if(i){const a={premove:!0};i!==!0&&(a.captured=i),Ue(e.movable.events.after,r,n,a),o=!0}}return Pt(e),o}function Cl(e,t){const r=e.predroppable.current;let n=!1;if(!r)return!1;if(t(r)){const o={role:r.role,color:e.movable.color};jn(e,o,r.key)&&(Ue(e.movable.events.afterNewPiece,r.role,r.key,{premove:!1,predrop:!0}),n=!0)}return kt(e),n}function Gn(e){Pt(e),kt(e),xe(e)}function $o(e){e.movable.color=e.movable.dests=e.animation.current=void 0,Gn(e)}function qt(e,t,r){let n=Math.floor(8*(e[0]-r.left)/r.width);t||(n=7-n);let o=7-Math.floor(8*(e[1]-r.top)/r.height);return t||(o=7-o),n>=0&&n<8&&o>=0&&o<8?We([n,o]):void 0}function Al(e,t,r,n){const o=ye(e),i=_i.filter(p=>Ci(o[0],o[1],p[0],p[1])||Ei(o[0],o[1],p[0],p[1])),c=i.map(p=>yi(We(p),r,n)).map(p=>pr(t,p)),[,h]=c.reduce((p,P,_)=>p[0]<P?p:[P,_],[c[0],0]);return We(i[h])}const qe=e=>e.orientation==="white",Ri="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Tl={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},Il={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function Ki(e){e==="start"&&(e=Ri);const t=new Map;let r=7,n=0;for(const o of e)switch(o){case" ":case"[":return t;case"/":if(--r,r<0)return t;n=0;break;case"~":{const i=t.get(We([n-1,r]));i&&(i.promoted=!0);break}default:{const i=o.charCodeAt(0);if(i<57)n+=i-48;else{const a=o.toLowerCase();t.set(We([n,r]),{role:Tl[a],color:o===a?"black":"white"}),++n}}}return t}function Ol(e){return cl.map(t=>qn.map(r=>{const n=e.get(r+t);if(n){let o=Il[n.role];return n.color==="white"&&(o=o.toUpperCase()),n.promoted&&(o+="~"),o}else return"1"}).join("")).join("/").replace(/1{2,}/g,t=>t.length.toString())}function Li(e,t){t.animation&&(Yn(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function zi(e,t){var r,n;if(!((r=t.movable)===null||r===void 0)&&r.dests&&(e.movable.dests=void 0),!((n=t.drawable)===null||n===void 0)&&n.autoShapes&&(e.drawable.autoShapes=[]),Yn(e,t),t.fen&&(e.pieces=Ki(t.fen),e.drawable.shapes=[]),"check"in t&&ml(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&Mi(e,e.selected),Li(e,t),!e.movable.rookCastle&&e.movable.dests){const o=e.movable.color==="white"?"1":"8",i="e"+o,a=e.movable.dests.get(i),c=e.pieces.get(i);if(!a||!c||c.role!=="king")return;e.movable.dests.set(i,a.filter(h=>!(h==="a"+o&&a.includes("c"+o))&&!(h==="h"+o&&a.includes("g"+o))))}}function Yn(e,t){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)&&ei(e[r])&&ei(t[r])?Yn(e[r],t[r]):e[r]=t[r])}function ei(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}const zt=(e,t)=>t.animation.enabled?Bl(e,t):yt(e,t);function yt(e,t){const r=e(t);return t.dom.redraw(),r}const Mn=(e,t)=>({key:e,pos:ye(e),piece:t}),Nl=(e,t)=>t.sort((r,n)=>pr(e.pos,r.pos)-pr(e.pos,n.pos))[0];function Ml(e,t){const r=new Map,n=[],o=new Map,i=[],a=[],c=new Map;let h,p,P;for(const[_,M]of e)c.set(_,Mn(_,M));for(const _ of Fn)h=t.pieces.get(_),p=c.get(_),h?p?Kn(h,p.piece)||(i.push(p),a.push(Mn(_,h))):a.push(Mn(_,h)):p&&i.push(p);for(const _ of a)p=Nl(_,i.filter(M=>Kn(_.piece,M.piece))),p&&(P=[p.pos[0]-_.pos[0],p.pos[1]-_.pos[1]],r.set(_.key,P.concat(P)),n.push(p.key));for(const _ of i)n.includes(_.key)||o.set(_.key,_.piece);return{anims:r,fadings:o}}function Di(e,t){const r=e.animation.current;if(r===void 0){e.dom.destroyed||e.dom.redrawNow();return}const n=1-(t-r.start)*r.frequency;if(n<=0)e.animation.current=void 0,e.dom.redrawNow();else{const o=Rl(n);for(const i of r.plan.anims.values())i[2]=i[0]*o,i[3]=i[1]*o;e.dom.redrawNow(!0),requestAnimationFrame((i=performance.now())=>Di(e,i))}}function Bl(e,t){const r=new Map(t.pieces),n=e(t),o=Ml(r,t);if(o.anims.size||o.fadings.size){const i=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:o},i||Di(t,performance.now())}else t.dom.redraw();return n}const Rl=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,Kl=["green","red","blue","yellow"];function Ll(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?xe(e):Gn(e);const r=Ut(t),n=qt(r,qe(e),e.dom.bounds());!n||(e.drawable.current={orig:n,pos:r,brush:ql(t),snapToValidMove:e.drawable.defaultSnapToValidMove},Ui(e))}function Ui(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const r=qt(t.pos,qe(e),e.dom.bounds());r||(t.snapToValidMove=!1);const n=t.snapToValidMove?Al(t.orig,t.pos,qe(e),e.dom.bounds()):r;n!==t.mouseSq&&(t.mouseSq=n,t.dest=n!==t.orig?n:void 0,e.dom.redrawNow()),Ui(e)}})}function zl(e,t){e.drawable.current&&(e.drawable.current.pos=Ut(t))}function Dl(e){const t=e.drawable.current;t&&(t.mouseSq&&Hl(e.drawable,t),qi(e))}function qi(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function Ul(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),Hi(e.drawable))}function ql(e){var t;const r=(e.shiftKey||e.ctrlKey)&&Si(e),n=e.altKey||e.metaKey||((t=e.getModifierState)===null||t===void 0?void 0:t.call(e,"AltGraph"));return Kl[(r?1:0)+(n?2:0)]}function Hl(e,t){const r=o=>o.orig===t.orig&&o.dest===t.dest,n=e.shapes.find(r);n&&(e.shapes=e.shapes.filter(o=>!r(o))),(!n||n.brush!==t.brush)&&e.shapes.push(t),Hi(e)}function Hi(e){e.onChange&&e.onChange(e.shapes)}function Fl(e,t){if(!t.isTrusted||t.button!==void 0&&t.button!==0||t.touches&&t.touches.length>1)return;const r=e.dom.bounds(),n=Ut(t),o=qt(n,qe(e),r);if(!o)return;const i=e.pieces.get(o),a=e.selected;!a&&e.drawable.enabled&&(e.drawable.eraseOnClick||!i||i.color!==e.turnColor)&&Ul(e),t.cancelable!==!1&&(!t.touches||e.blockTouchScroll||i||a||Ql(e,n))&&t.preventDefault();const c=!!e.premovable.current,h=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&Wn(e,e.selected,o)?zt(_=>Ln(_,o),e):Ln(e,o);const p=e.selected===o,P=Qi(e,o);if(i&&P&&p&&Pl(e,o)){e.draggable.current={orig:o,piece:i,origPos:n,pos:n,started:e.draggable.autoDistance&&e.stats.dragged,element:P,previouslySelected:a,originTarget:t.target,keyHasChanged:!1},P.cgDragging=!0,P.classList.add("dragging");const _=e.dom.elements.ghost;_&&(_.className=`ghost ${i.color} ${i.role}`,it(_,vr(r)(ye(o),qe(e))),Vn(_,!0)),Zn(e)}else c&&Pt(e),h&&kt(e);e.dom.redraw()}function Ql(e,t){const r=qe(e),n=e.dom.bounds(),o=Math.pow(n.width/8,2);for(const i of e.pieces.keys()){const a=yi(i,r,n);if(pr(a,t)<=o)return!0}return!1}function Vl(e,t,r,n){const o="a0";e.pieces.set(o,t),e.dom.redraw();const i=Ut(r);e.draggable.current={orig:o,piece:t,origPos:i,pos:i,started:!0,element:()=>Qi(e,o),originTarget:r.target,newPiece:!0,force:!!n,keyHasChanged:!1},Zn(e)}function Zn(e){requestAnimationFrame(()=>{var t;const r=e.draggable.current;if(!r)return;!((t=e.animation.current)===null||t===void 0)&&t.plan.anims.has(r.orig)&&(e.animation.current=void 0);const n=e.pieces.get(r.orig);if(!n||!Kn(n,r.piece))Lr(e);else if(!r.started&&pr(r.pos,r.origPos)>=Math.pow(e.draggable.distance,2)&&(r.started=!0),r.started){if(typeof r.element=="function"){const i=r.element();if(!i)return;i.cgDragging=!0,i.classList.add("dragging"),r.element=i}const o=e.dom.bounds();it(r.element,[r.pos[0]-o.left-o.width/16,r.pos[1]-o.top-o.height/16]),r.keyHasChanged||(r.keyHasChanged=r.orig!==qt(r.pos,qe(e),o))}Zn(e)})}function jl(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=Ut(t))}function Wl(e,t){const r=e.draggable.current;if(!r)return;if(t.type==="touchend"&&t.cancelable!==!1&&t.preventDefault(),t.type==="touchend"&&r.originTarget!==t.target&&!r.newPiece){e.draggable.current=void 0;return}Pt(e),kt(e);const n=Ut(t)||r.pos,o=qt(n,qe(e),e.dom.bounds());o&&r.started&&r.orig!==o?r.newPiece?Ni(e,r.orig,o,r.force):(e.stats.ctrlKey=t.ctrlKey,Oi(e,r.orig,o)&&(e.stats.dragged=!0)):r.newPiece?e.pieces.delete(r.orig):e.draggable.deleteOnDropOff&&!o&&(e.pieces.delete(r.orig),Ue(e.events.change)),(r.orig===r.previouslySelected||r.keyHasChanged)&&(r.orig===o||!o)?xe(e):e.selectable.enabled||xe(e),Fi(e),e.draggable.current=void 0,e.dom.redraw()}function Lr(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,xe(e),Fi(e),e.dom.redraw())}function Fi(e){const t=e.dom.elements;t.ghost&&Vn(t.ghost,!1)}function Qi(e,t){let r=e.dom.elements.board.firstChild;for(;r;){if(r.cgKey===t&&r.tagName==="PIECE")return r;r=r.nextSibling}}function xl(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{ti(e,2),setTimeout(()=>ti(e,void 0),120)},120)}function ti(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function Gl(e,t){function r(){vl(e),t()}return{set(n){n.orientation&&n.orientation!==e.orientation&&r(),Li(e,n),(n.fen?zt:yt)(o=>zi(o,n),e)},state:e,getFen:()=>Ol(e.pieces),toggleOrientation:r,setPieces(n){zt(o=>gl(o,n),e)},selectSquare(n,o){n?zt(i=>Ln(i,n,o),e):e.selected&&(xe(e),e.dom.redraw())},move(n,o){zt(i=>Ti(i,n,o),e)},newPiece(n,o){zt(i=>jn(i,n,o),e)},playPremove(){if(e.premovable.current){if(zt(kl,e))return!0;e.dom.redraw()}return!1},playPredrop(n){if(e.predroppable.current){const o=Cl(e,n);return e.dom.redraw(),o}return!1},cancelPremove(){yt(Pt,e)},cancelPredrop(){yt(kt,e)},cancelMove(){yt(n=>{Gn(n),Lr(n)},e)},stop(){yt(n=>{$o(n),Lr(n)},e)},explode(n){xl(e,n)},setAutoShapes(n){yt(o=>o.drawable.autoShapes=n,e)},setShapes(n){yt(o=>o.drawable.shapes=n,e)},getKeyAtDomPos(n){return qt(n,qe(e),e.dom.bounds())},redrawAll:t,dragNewPiece(n,o,i){Vl(e,n,o,i)},destroy(){$o(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function Yl(){return{pieces:Ki(Ri),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},prevSvgHash:""},hold:fl()}}function zn(e,t,r){const n=new Map,o=[];for(const c of e)n.set(c.hash,!1);let i=t.firstChild,a;for(;i;)a=i.getAttribute("cgHash"),n.has(a)?n.set(a,!0):o.push(i),i=i.nextSibling;for(const c of o)t.removeChild(c);for(const c of e)n.get(c.hash)||t.appendChild(r(c))}function Je(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Zl(e,t,r){const n=e.drawable,o=n.current,i=o&&o.mouseSq?o:void 0,a=new Map,c=e.dom.bounds(),h=n.autoShapes.filter(T=>!T.piece);for(const T of n.shapes.concat(h).concat(i?[i]:[]))T.dest&&a.set(T.dest,(a.get(T.dest)||0)+1);const p=n.shapes.concat(h).map(T=>({shape:T,current:!1,hash:ri(T,a,!1,c)}));i&&p.push({shape:i,current:!0,hash:ri(i,a,!0,c)});const P=p.map(T=>T.hash).join(";");if(P===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=P;const _=t.querySelector("defs"),M=t.querySelector("g"),R=r.querySelector("g");Jl(n,p,_),zn(p.filter(T=>!T.shape.customSvg),M,T=>ni(e,T,n.brushes,a,c)),zn(p.filter(T=>T.shape.customSvg),R,T=>ni(e,T,n.brushes,a,c))}function Jl(e,t,r){const n=new Map;let o;for(const c of t)c.shape.dest&&(o=e.brushes[c.shape.brush],c.shape.modifiers&&(o=Vi(o,c.shape.modifiers)),n.set(o.key,o));const i=new Set;let a=r.firstChild;for(;a;)i.add(a.getAttribute("cgKey")),a=a.nextSibling;for(const[c,h]of n.entries())i.has(c)||r.appendChild(oa(h))}function ri({orig:e,dest:t,brush:r,piece:n,modifiers:o,customSvg:i},a,c,h){return[h.width,h.height,c,e,t,r,t&&(a.get(t)||0)>1,n&&Xl(n),o&&$l(o),i&&ea(i)].filter(p=>p).join(",")}function Xl(e){return[e.color,e.role,e.scale].filter(t=>t).join(",")}function $l(e){return""+(e.lineWidth||"")}function ea(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)>>>0;return"custom-"+t.toString()}function ni(e,{shape:t,current:r,hash:n},o,i,a){let c;const h=oi(ye(t.orig),e.orientation);if(t.customSvg)c=ta(t.customSvg,h,a);else if(t.dest){let p=o[t.brush];t.modifiers&&(p=Vi(p,t.modifiers)),c=na(p,h,oi(ye(t.dest),e.orientation),r,(i.get(t.dest)||0)>1,a)}else c=ra(o[t.brush],h,r,a);return c.setAttribute("cgHash",n),c}function ta(e,t,r){const[n,o]=zr(t,r),i=Et(Je("g"),{transform:`translate(${n},${o})`}),a=Et(Je("svg"),{width:1,height:1,viewBox:"0 0 100 100"});return i.appendChild(a),a.innerHTML=e,i}function ra(e,t,r,n){const o=zr(t,n),i=ia(),a=(n.width+n.height)/(4*Math.max(n.width,n.height));return Et(Je("circle"),{stroke:e.color,"stroke-width":i[r?0:1],fill:"none",opacity:ji(e,r),cx:o[0],cy:o[1],r:a-i[1]/2})}function na(e,t,r,n,o,i){const a=aa(o&&!n),c=zr(t,i),h=zr(r,i),p=h[0]-c[0],P=h[1]-c[1],_=Math.atan2(P,p),M=Math.cos(_)*a,R=Math.sin(_)*a;return Et(Je("line"),{stroke:e.color,"stroke-width":la(e,n),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:ji(e,n),x1:c[0],y1:c[1],x2:h[0]-M,y2:h[1]-R})}function oa(e){const t=Et(Je("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(Et(Je("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function Et(e,t){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.setAttribute(r,t[r]);return e}function oi(e,t){return t==="white"?e:[7-e[0],7-e[1]]}function Vi(e,t){return{color:e.color,opacity:Math.round(e.opacity*10)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(r=>r).join("")}}function ia(){return[3/64,4/64]}function la(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function ji(e,t){return(e.opacity||1)*(t?.9:1)}function aa(e){return(e?20:10)/64}function zr(e,t){const r=Math.min(1,t.width/t.height),n=Math.min(1,t.height/t.width);return[(e[0]-3.5)*r,(3.5-e[1])*n]}function sa(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const h of sl)e.classList.toggle("orientation-"+h,t.orientation===h);e.classList.toggle("manipulable",!t.viewOnly);const r=at("cg-container");e.appendChild(r);const n=at("cg-board");r.appendChild(n);let o,i,a;if(t.drawable.visible&&(o=Et(Je("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),o.appendChild(Je("defs")),o.appendChild(Je("g")),i=Et(Je("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),i.appendChild(Je("g")),a=at("cg-auto-pieces"),r.appendChild(o),r.appendChild(i),r.appendChild(a)),t.coordinates){const h=t.orientation==="black"?" black":"",p=t.ranksPosition==="left"?" left":"";r.appendChild(ii(Hn,"ranks"+h+p)),r.appendChild(ii(qn,"files"+h))}let c;return t.draggable.enabled&&t.draggable.showGhost&&(c=at("piece","ghost"),Vn(c,!1),r.appendChild(c)),{board:n,container:r,wrap:e,ghost:c,svg:o,customSvg:i,autoPieces:a}}function ii(e,t){const r=at("coords",t);let n;for(const o of e)n=at("coord"),n.textContent=o,r.appendChild(n);return r}function ca(e,t){if(!e.dropmode.active)return;Pt(e),kt(e);const r=e.dropmode.piece;if(r){e.pieces.set("a0",r);const n=Ut(t),o=n&&qt(n,qe(e),e.dom.bounds());o&&Ni(e,"a0",o)}e.dom.redraw()}function ua(e,t){const r=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),e.viewOnly)return;const n=da(e);r.addEventListener("touchstart",n,{passive:!1}),r.addEventListener("mousedown",n,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&r.addEventListener("contextmenu",o=>o.preventDefault())}function fa(e,t){const r=[];if("ResizeObserver"in window||r.push(cr(document.body,"chessground.resize",t)),!e.viewOnly){const n=li(e,jl,zl),o=li(e,Wl,Dl);for(const a of["touchmove","mousemove"])r.push(cr(document,a,n));for(const a of["touchend","mouseup"])r.push(cr(document,a,o));const i=()=>e.dom.bounds.clear();r.push(cr(document,"scroll",i,{capture:!0,passive:!0})),r.push(cr(window,"resize",i,{passive:!0}))}return()=>r.forEach(n=>n())}function cr(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}const da=e=>t=>{e.draggable.current?Lr(e):e.drawable.current?qi(e):t.shiftKey||Si(t)?e.drawable.enabled&&Ll(e,t):e.viewOnly||(e.dropmode.active?ca(e,t):Fl(e,t))},li=(e,t,r)=>n=>{e.drawable.current?e.drawable.enabled&&r(e,n):e.viewOnly||t(e,n)};function ha(e){const t=qe(e),r=vr(e.dom.bounds()),n=e.dom.elements.board,o=e.pieces,i=e.animation.current,a=i?i.plan.anims:new Map,c=i?i.plan.fadings:new Map,h=e.draggable.current,p=va(e),P=new Set,_=new Set,M=new Map,R=new Map;let T,I,ve,de,ne,fe,Ie,$,ge,Ae;for(I=n.firstChild;I;){if(T=I.cgKey,Wi(I))if(ve=o.get(T),ne=a.get(T),fe=c.get(T),de=I.cgPiece,I.cgDragging&&(!h||h.orig!==T)&&(I.classList.remove("dragging"),it(I,r(ye(T),t)),I.cgDragging=!1),!fe&&I.cgFading&&(I.cgFading=!1,I.classList.remove("fading")),ve){if(ne&&I.cgAnimating&&de===ur(ve)){const O=ye(T);O[0]+=ne[2],O[1]+=ne[3],I.classList.add("anim"),it(I,r(O,t))}else I.cgAnimating&&(I.cgAnimating=!1,I.classList.remove("anim"),it(I,r(ye(T),t)),e.addPieceZIndex&&(I.style.zIndex=Bn(ye(T),t)));de===ur(ve)&&(!fe||!I.cgFading)?P.add(T):fe&&de===ur(fe)?(I.classList.add("fading"),I.cgFading=!0):Rn(M,de,I)}else Rn(M,de,I);else if(xi(I)){const O=I.className;p.get(T)===O?_.add(T):Rn(R,O,I)}I=I.nextSibling}for(const[O,H]of p)if(!_.has(O)){ge=R.get(H),Ae=ge&&ge.pop();const _e=r(ye(O),t);if(Ae)Ae.cgKey=O,it(Ae,_e);else{const we=at("square",H);we.cgKey=O,it(we,_e),n.insertBefore(we,n.firstChild)}}for(const[O,H]of o)if(ne=a.get(O),!P.has(O))if(Ie=M.get(ur(H)),$=Ie&&Ie.pop(),$){$.cgKey=O,$.cgFading&&($.classList.remove("fading"),$.cgFading=!1);const _e=ye(O);e.addPieceZIndex&&($.style.zIndex=Bn(_e,t)),ne&&($.cgAnimating=!0,$.classList.add("anim"),_e[0]+=ne[2],_e[1]+=ne[3]),it($,r(_e,t))}else{const _e=ur(H),we=at("piece",_e),f=ye(O);we.cgPiece=_e,we.cgKey=O,ne&&(we.cgAnimating=!0,f[0]+=ne[2],f[1]+=ne[3]),it(we,r(f,t)),e.addPieceZIndex&&(we.style.zIndex=Bn(f,t)),n.appendChild(we)}for(const O of M.values())si(e,O);for(const O of R.values())si(e,O)}function pa(e){const t=qe(e),r=vr(e.dom.bounds());let n=e.dom.elements.board.firstChild;for(;n;)(Wi(n)&&!n.cgAnimating||xi(n))&&it(n,r(ye(n.cgKey),t)),n=n.nextSibling}function ai(e){var t,r;const n=e.dom.elements.wrap.getBoundingClientRect(),o=e.dom.elements.container,i=n.height/n.width,a=Math.floor(n.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,c=a*i;o.style.width=a+"px",o.style.height=c+"px",e.dom.bounds.clear(),(t=e.addDimensionsCssVarsTo)===null||t===void 0||t.style.setProperty("--cg-width",a+"px"),(r=e.addDimensionsCssVarsTo)===null||r===void 0||r.style.setProperty("--cg-height",c+"px")}const Wi=e=>e.tagName==="PIECE",xi=e=>e.tagName==="SQUARE";function si(e,t){for(const r of t)e.dom.elements.board.removeChild(r)}function Bn(e,t){const n=e[1];return`${t?3+7-n:3+n}`}const ur=e=>`${e.color} ${e.role}`;function va(e){var t;const r=new Map;if(e.lastMove&&e.highlight.lastMove)for(const i of e.lastMove)St(r,i,"last-move");if(e.check&&e.highlight.check&&St(r,e.check,"check"),e.selected&&(St(r,e.selected,"selected"),e.movable.showDests)){const i=(t=e.movable.dests)===null||t===void 0?void 0:t.get(e.selected);if(i)for(const c of i)St(r,c,"move-dest"+(e.pieces.has(c)?" oc":""));const a=e.premovable.dests;if(a)for(const c of a)St(r,c,"premove-dest"+(e.pieces.has(c)?" oc":""))}const n=e.premovable.current;if(n)for(const i of n)St(r,i,"current-premove");else e.predroppable.current&&St(r,e.predroppable.current.key,"current-premove");const o=e.exploding;if(o)for(const i of o.keys)St(r,i,"exploding"+o.stage);return r}function St(e,t,r){const n=e.get(t);n?e.set(t,`${n} ${r}`):e.set(t,r)}function Rn(e,t,r){const n=e.get(t);n?n.push(r):e.set(t,[r])}function ga(e,t){const n=e.drawable.autoShapes.filter(o=>o.piece).map(o=>({shape:o,hash:_a(o),current:!1}));zn(n,t,o=>ba(e,o,e.dom.bounds()))}function ma(e){var t;const r=qe(e),n=vr(e.dom.bounds());let o=(t=e.dom.elements.autoPieces)===null||t===void 0?void 0:t.firstChild;for(;o;)wi(o,n(ye(o.cgKey),r),o.cgScale),o=o.nextSibling}function ba(e,{shape:t,hash:r},n){var o,i,a;const c=t.orig,h=(o=t.piece)===null||o===void 0?void 0:o.role,p=(i=t.piece)===null||i===void 0?void 0:i.color,P=(a=t.piece)===null||a===void 0?void 0:a.scale,_=at("piece",`${h} ${p}`);return _.setAttribute("cgHash",r),_.cgKey=c,_.cgScale=P,wi(_,vr(n)(ye(c),qe(e)),P),_}const _a=e=>{var t,r,n;return[e.orig,(t=e.piece)===null||t===void 0?void 0:t.role,(r=e.piece)===null||r===void 0?void 0:r.color,(n=e.piece)===null||n===void 0?void 0:n.scale].join(",")};function wa(e,t){const r=Yl();zi(r,t||{});function n(){const o="dom"in r?r.dom.unbind:void 0,i=sa(e,r),a=ul(()=>i.board.getBoundingClientRect()),c=P=>{ha(p),i.autoPieces&&ga(p,i.autoPieces),!P&&i.svg&&Zl(p,i.svg,i.customSvg)},h=()=>{ai(p),pa(p),i.autoPieces&&ma(p)},p=r;return p.dom={elements:i,bounds:a,redraw:Sa(c),redrawNow:c,unbind:o},p.drawable.prevSvgHash="",ai(p),c(!1),ua(p,h),o||(p.dom.unbind=fa(p,h)),p.events.insert&&p.events.insert(i),p}return Gl(n(),n)}function Sa(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}function ya(e,t){return ci(e,t),{update(r){ci(e,r)}}}function ci(e,{boardUrl:t,piecesFolderUrl:r,pieceFileExt:n="svg"}){const o=["wK","wQ","wR","wB","wN","wP","bK","bQ","bR","bB","bN","bP"];if(t&&e.style.setProperty("--cg-url-board",`url(${t})`),r)for(const i of o)e.style.setProperty(`--cg-url-${i}`,`url(${r}/${i}.${n})`)}function Ea(e,{config:t,initializer:r}){let n;function o(i){var a;n=wa(e,i.config),(a=i.initializer)==null||a.call(i,n)}return o({config:t,initializer:r}),{update:o,destroy(){n.destroy()}}}var Dn={},Dr={},B={},rr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ROOKS=e.SQUARES=e.RANKS=e.RANK_8=e.RANK_7=e.RANK_6=e.RANK_5=e.RANK_4=e.RANK_3=e.RANK_2=e.RANK_1=e.BITS=e.FLAGS=e.SHIFTS=e.RAYS=e.ATTACKS=e.PIECE_OFFSETS=e.PAWN_OFFSETS=e.POSSIBLE_RESULTS=e.DEFAULT_POSITION=e.SYMBOLS=e.EMPTY=e.KING=e.QUEEN=e.ROOK=e.BISHOP=e.KNIGHT=e.PAWN=e.BLACK=e.WHITE=void 0,e.WHITE="w",e.BLACK="b",e.PAWN="p",e.KNIGHT="n",e.BISHOP="b",e.ROOK="r",e.QUEEN="q",e.KING="k",e.EMPTY=-1,e.SYMBOLS="pnbrqkPNBRQK",e.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",e.POSSIBLE_RESULTS=["1-0","0-1","1/2-1/2","*"],e.PAWN_OFFSETS={b:[16,32,17,15],w:[-16,-32,-17,-15]},e.PIECE_OFFSETS={p:[],n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},e.ATTACKS=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],e.RAYS=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],e.SHIFTS={p:0,n:1,b:2,r:3,q:4,k:5},e.FLAGS={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},e.BITS={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},e.RANK_1=7,e.RANK_2=6,e.RANK_3=5,e.RANK_4=4,e.RANK_5=3,e.RANK_6=2,e.RANK_7=1,e.RANK_8=0,e.RANKS=[e.RANK_8,e.RANK_7,e.RANK_6,e.RANK_5,e.RANK_4,e.RANK_3,e.RANK_2,e.RANK_1],e.SQUARES={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},e.ROOKS={w:[{square:e.SQUARES.a1,flag:e.BITS.QSIDE_CASTLE},{square:e.SQUARES.h1,flag:e.BITS.KSIDE_CASTLE}],b:[{square:e.SQUARES.a8,flag:e.BITS.QSIDE_CASTLE},{square:e.SQUARES.h8,flag:e.BITS.KSIDE_CASTLE}]}})(rr);var fr={},ui;function Jn(){if(ui)return fr;ui=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.State=void 0;var e=rr,t=Zi(),r=function(){function n(o,i,a,c,h,p,P){this.board=o||new Array(128),this.kings=i||{w:e.EMPTY,b:e.EMPTY},this.turn=a||e.WHITE,this.castling=c||{w:0,b:0},this.ep_square=h||e.EMPTY,this.half_moves=p||0,this.move_number=P||1}return n.prototype.clone=function(){return new n(this.board.slice(),{w:this.kings.w,b:this.kings.b},this.turn,{w:this.castling.w,b:this.castling.b},this.ep_square,this.half_moves,this.move_number)},Object.defineProperty(n.prototype,"fen",{get:function(){return t.getFen(this)},enumerable:!1,configurable:!0}),n}();return fr.State=r,fr}var ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.strippedSan=ue.validateFen=ue.isFlagKey=ue.isSquare=ue.isPieceSymbol=ue.isColor=ue.symbol=ue.isDigit=ue.swapColor=ue.algebraic=ue.file=ue.rank=void 0;var Rr=rr;function Gi(e){return e>>4}ue.rank=Gi;function Yi(e){return e&15}ue.file=Yi;function Pa(e){var t=Yi(e),r=Gi(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}ue.algebraic=Pa;function ka(e){return e===Rr.WHITE?Rr.BLACK:Rr.WHITE}ue.swapColor=ka;function Ca(e){return/^[0-9]$/.test(e)}ue.isDigit=Ca;function Aa(e){var t=e.type,r=e.color;return r===Rr.WHITE?t.toUpperCase():t.toLowerCase()}ue.symbol=Aa;function Ta(e){return e==="w"||e==="b"}ue.isColor=Ta;function Ia(e){return/^[pnbrqk]$/.test(e)}ue.isPieceSymbol=Ia;function Oa(e){return/^[a-h][1-8]$/.test(e)}ue.isSquare=Oa;function Na(e){var t=["NORMAL","CAPTURE","BIG_PAWN","EP_CAPTURE","PROMOTION","KSIDE_CASTLE","QSIDE_CASTLE"];return t.indexOf(e)!==-1}ue.isFlagKey=Na;function Ma(e){var t={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"},r=e.split(/\s+/);if(r.length!==6)return{valid:!1,error_number:1,error:t[1]};if(isNaN(r[5])||parseInt(r[5],10)<=0)return{valid:!1,error_number:2,error:t[2]};if(isNaN(r[4])||parseInt(r[4],10)<0)return{valid:!1,error_number:3,error:t[3]};if(!/^(-|[abcdefgh][36])$/.test(r[3]))return{valid:!1,error_number:4,error:t[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(r[2]))return{valid:!1,error_number:5,error:t[5]};if(!/^(w|b)$/.test(r[1]))return{valid:!1,error_number:6,error:t[6]};var n=r[0].split("/");if(n.length!==8)return{valid:!1,error_number:7,error:t[7]};for(var o=0;o<n.length;o++){for(var i=0,a=!1,c=0;c<n[o].length;c++)if(isNaN(n[o][c])){if(!/^[prnbqkPRNBQK]$/.test(n[o][c]))return{valid:!1,error_number:9,error:t[9]};i+=1,a=!1}else{if(a)return{valid:!1,error_number:8,error:t[8]};i+=parseInt(n[o][c],10),a=!0}if(i!==8)return{valid:!1,error_number:10,error:t[10]}}return r[3][1]=="3"&&r[1]=="w"||r[3][1]=="6"&&r[1]=="b"?{valid:!1,error_number:11,error:t[11]}:{valid:!0,error_number:0,error:t[0]}}ue.validateFen=Ma;function Ba(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}ue.strippedSan=Ba;var fi;function Zi(){if(fi)return B;fi=1,Object.defineProperty(B,"__esModule",{value:!0}),B.validateMove=B.getBoard=B.ascii=B.buildMove=B.makeMove=B.insufficientMaterial=B.inStalemate=B.inCheckmate=B.inCheck=B.isKingAttacked=B.isAttacked=B.makePretty=B.sanToMove=B.moveToSan=B.generateMoves=B.removePiece=B.putPiece=B.clonePiece=B.cloneMove=B.getPiece=B.loadPgn=B.getPgn=B.loadFen=B.getFen=B.getDisambiguator=void 0;var e=rr,t=Jn(),r=ue;function n(f,d,v){for(var m=R(f,{legal:!v}),b=d.from,A=d.to,k=d.piece,C=0,E=0,N=0,G=0,q=m.length;G<q;G++){var ee=m[G].from,Y=m[G].to,j=m[G].piece;k===j&&b!==ee&&A===Y&&(C++,r.rank(b)===r.rank(ee)&&E++,r.file(b)===r.file(ee)&&N++)}return C>0?E>0&&N>0?r.algebraic(b):N>0?r.algebraic(b).charAt(1):r.algebraic(b).charAt(0):""}B.getDisambiguator=n;function o(f){for(var d=0,v="",m=e.SQUARES.a8;m<=e.SQUARES.h1;m++){var b=f.board[m];if(!b)d++;else{d>0&&(v+=d,d=0);var A=b.color,k=b.type;v+=A===e.WHITE?k.toUpperCase():k.toLowerCase()}m+1&136&&(d>0&&(v+=d),m!==e.SQUARES.h1&&(v+="/"),d=0,m+=8)}var C="";f.castling[e.WHITE]&e.BITS.KSIDE_CASTLE&&(C+="K"),f.castling[e.WHITE]&e.BITS.QSIDE_CASTLE&&(C+="Q"),f.castling[e.BLACK]&e.BITS.KSIDE_CASTLE&&(C+="k"),f.castling[e.BLACK]&e.BITS.QSIDE_CASTLE&&(C+="q"),C=C||"-";var E=f.ep_square===e.EMPTY?"-":r.algebraic(f.ep_square);return[v,f.turn,C,E,f.half_moves,f.move_number].join(" ")}B.getFen=o;function i(f){var d=f.split(/\s+/),v=d[0],m=0;if(!r.validateFen(f).valid)return null;for(var b=new t.State,A=0;A<v.length;A++){var k=v.charAt(A);if(k==="/")m+=8;else if(r.isDigit(k))m+=parseInt(k,10);else{var C=k<"a"?e.WHITE:e.BLACK,E=_(b,{type:k.toLowerCase(),color:C},r.algebraic(m));if(!E)return null;b=E,m++}}return b.turn=d[1]===e.BLACK?e.BLACK:e.WHITE,d[2].indexOf("K")>-1&&(b.castling.w|=e.BITS.KSIDE_CASTLE),d[2].indexOf("Q")>-1&&(b.castling.w|=e.BITS.QSIDE_CASTLE),d[2].indexOf("k")>-1&&(b.castling.b|=e.BITS.KSIDE_CASTLE),d[2].indexOf("q")>-1&&(b.castling.b|=e.BITS.QSIDE_CASTLE),b.ep_square=d[3]==="-"?e.EMPTY:e.SQUARES[d[3]],b.half_moves=parseInt(d[4],10),b.move_number=parseInt(d[5],10),b}B.loadFen=i;function a(f,d,v,m,b){b===void 0&&(b={});var A=b.newline_char,k=A===void 0?`
`:A,C=b.max_width,E=C===void 0?0:C,N=[],G=!1;for(var q in d)N.push("["+q+' "'+d[q]+'"]'+k),G=!0;G&&m.length&&N.push(k);var ee=function(oe){var te=v[f.fen];if(typeof te<"u"){var le=oe.length>0?" ":"";oe=""+oe+le+"{"+te+"}"}return oe};m[0]&&(f=m[0].state);var Y=[],j="";if(m.length===0&&Y.push(ee("")),m.forEach(function(oe,te){var le=oe.move;j=ee(j),te===0&&le.color===e.BLACK?j=f.move_number+". ...":le.color===e.WHITE&&(j.length&&Y.push(j),j=f.move_number+"."),j=j+" "+T(f,le),f=Ae(f,le)}),j.length&&Y.push(ee(j)),typeof d.Result<"u"&&Y.push(d.Result),E===0)return N.join("")+Y.join(" ");for(var Z=function(){return N.length>0&&N[N.length-1]===" "?(N.pop(),!0):!1},he=function(oe,te){for(var le=0,ze=te.split(" ");le<ze.length;le++){var ke=ze[le];if(!!ke){if(oe+ke.length>E){for(;Z();)oe--;N.push(k),oe=0}N.push(ke),oe+=ke.length,N.push(" "),oe++}}return Z()&&oe--,oe},ae=0,q=0;q<Y.length;q++){if(ae+Y[q].length>E&&Y[q].includes("{")){ae=he(ae,Y[q]);continue}ae+Y[q].length>E&&q!==0?(N[N.length-1]===" "&&N.pop(),N.push(k),ae=0):q!==0&&(N.push(" "),ae++),N.push(Y[q]),ae+=Y[q].length}return N.join("")}B.getPgn=a;function c(f,d){d===void 0&&(d={});var v=d.newline_char,m=v===void 0?`\r?
`:v,b=d.sloppy,A=b===void 0?!1:b,k=function(F){return F.replace(/\\/g,"\\")},C=function(F,Ee){for(var K=Ee.newline_char,D={},se=F.split(new RegExp(k(K))),re="",J="",Te=0;Te<se.length;Te++)re=se[Te].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),J=se[Te].replace(/^\[[A-Za-z]+\s"(.*)" *\]$/,"$1"),re.trim().length>0&&(D[re.trim()]=J);return D},E=new RegExp("^(\\[((?:"+k(m)+")|.)*\\])(?:"+k(m)+"){2}"),N=E.test(f)?E.exec(f)[1]:"",G=i(e.DEFAULT_POSITION),q=C(N,{newline_char:m,sloppy:A});if(q.SetUp==="1"&&"FEN"in q){var ee=i(q.FEN);if(!ee)return null;G=ee}for(var Y=function(F){return Array.from(F).map(function(Ee){return Ee.charCodeAt(0)<128?Ee.charCodeAt(0).toString(16):encodeURIComponent(Ee).replace(/%/g,"").toLowerCase()}).join("")},j=function(F){var Ee;return F.length==0?"":decodeURIComponent("%"+((Ee=F==null?void 0:F.match(/.{1,2}/g))===null||Ee===void 0?void 0:Ee.join("%")))},Z=function(F){return F=F.replace(new RegExp(k(m),"g")," "),"{"+Y(F.slice(1,F.length-1))+"}"},he=function(F){if(F.startsWith("{")&&F.endsWith("}"))return j(F.slice(1,F.length-1))},ae=f.replace(N,"").replace(new RegExp("({[^}]*})+?|;([^"+k(m)+"]*)","g"),function(F,Ee,K){return Ee!==void 0?Z(Ee):" "+Z("{"+K.slice(1)+"}")}).replace(new RegExp(k(m),"g")," "),oe=/(\([^()]+\))+?/g;oe.test(ae);)ae=ae.replace(oe,"");ae=ae.replace(/\d+\.(\.\.)?/g,""),ae=ae.replace(/\.\.\./g,""),ae=ae.replace(/\$\d+/g,"");for(var te=ae.trim().split(new RegExp(/\s+/)).join(",").replace(/,,+/g,",").split(","),le={},ze=[],ke=0;ke<te.length;ke++){var Pe=te[ke],Ce=he(Pe);if(Ce!==void 0){le[G.fen]=Ce;continue}if(ke===te.length-1&&e.POSSIBLE_RESULTS.indexOf(Pe)!==-1){Object.keys(q).length&&typeof q.Result>"u"&&(q.Result=Pe);continue}var Oe=I(G,te[ke],{sloppy:A});if(Oe===null)return null;ze.push({move:Oe,state:G});var ee=Ae(G,Oe);if(!ee)return null;G=ee}return[G,q,le,ze]}B.loadPgn=c;function h(f,d){if(!d||(d=d.toLowerCase(),!r.isSquare(d)))return null;var v=e.SQUARES[d],m=f.board[v];return m?P(m):null}B.getPiece=h;function p(f){return{to:f.to,from:f.from,color:f.color,flags:f.flags,piece:f.piece,captured:f.captured,promotion:f.promotion,san:f.san}}B.cloneMove=p;function P(f){return{color:f.color,type:f.type}}B.clonePiece=P;function _(f,d,v){var m=d.type,b=d.color;if(!m||!b||!v||(m=m.toLowerCase(),b=b.toLowerCase(),v=v.toLowerCase(),!r.isPieceSymbol(m)||!r.isColor(b)||!r.isSquare(v)))return null;var A=f.clone(),k=e.SQUARES[v];return m===e.KING&&A.kings[b]!==e.EMPTY&&A.kings[b]!==k?null:(A.board[k]={type:m,color:b},m===e.KING&&(A.kings[b]=k),A)}B.putPiece=_;function M(f,d){if(!d||(d=d.toLowerCase(),!r.isSquare(d)))return null;var v=e.SQUARES[d],m=f.board[v];if(!m)return null;var b=f.clone(),A=m.type,k=m.color;return A===e.KING&&(b.kings[k]=e.EMPTY),delete b.board[v],b}B.removePiece=M;function R(f,d){var v,m;d===void 0&&(d={});var b=d.legal,A=b===void 0?!0:b,k=function(K,D,se,re,J){var Te=K[se];if(Te&&Te.type===e.PAWN&&(r.rank(re)===e.RANK_8||r.rank(re)===e.RANK_1))for(var ie=[e.QUEEN,e.ROOK,e.BISHOP,e.KNIGHT],Se=0,Ne=ie.length;Se<Ne;Se++)D.push(O(f,se,re,J,ie[Se]));else D.push(O(f,se,re,J))},C=[],E=f.turn,N=r.swapColor(E),G={b:e.RANK_7,w:e.RANK_2},q=e.SQUARES.a8,ee=e.SQUARES.h1,Y=!1,j=d.square;if(j)if(j=j.toLowerCase(),r.isSquare(j))q=ee=e.SQUARES[j],Y=!0;else return[];for(var Z=q;Z<=ee;Z++){if(Z&136){Z+=7;continue}var he=f.board[Z];if(!(!he||he.color!==E))if(he.type===e.PAWN){var ae=Z+e.PAWN_OFFSETS[E][0];if(!f.board[ae]){k(f.board,C,Z,ae,e.BITS.NORMAL);var oe=Z+e.PAWN_OFFSETS[E][1];G[E]===r.rank(Z)&&!f.board[oe]&&k(f.board,C,Z,oe,e.BITS.BIG_PAWN)}for(var te=2;te<4;te++){var le=Z+e.PAWN_OFFSETS[E][te];le&136||(f.board[le]&&((v=f.board[le])===null||v===void 0?void 0:v.color)===N?k(f.board,C,Z,le,e.BITS.CAPTURE):le===f.ep_square&&k(f.board,C,Z,f.ep_square,e.BITS.EP_CAPTURE))}}else for(var te=0,ze=e.PIECE_OFFSETS[he.type].length;te<ze;te++)for(var ke=e.PIECE_OFFSETS[he.type][te],Pe=Z;Pe+=ke,!(Pe&136);){if(!f.board[Pe])k(f.board,C,Z,Pe,e.BITS.NORMAL);else{if(((m=f.board[Pe])===null||m===void 0?void 0:m.color)===E)break;k(f.board,C,Z,Pe,e.BITS.CAPTURE);break}if(he.type==="n"||he.type==="k")break}}if(!Y||ee===f.kings[E]){if(f.castling[E]&e.BITS.KSIDE_CASTLE){var Ce=f.kings[E],Oe=Ce+2;!f.board[Ce+1]&&!f.board[Oe]&&!de(f,N,f.kings[E])&&!de(f,N,Ce+1)&&!de(f,N,Oe)&&k(f.board,C,f.kings[E],Oe,e.BITS.KSIDE_CASTLE)}if(f.castling[E]&e.BITS.QSIDE_CASTLE){var Ce=f.kings[E],Oe=Ce-2;!f.board[Ce-1]&&!f.board[Ce-2]&&!f.board[Ce-3]&&!de(f,N,f.kings[E])&&!de(f,N,Ce-1)&&!de(f,N,Oe)&&k(f.board,C,f.kings[E],Oe,e.BITS.QSIDE_CASTLE)}}if(!A)return C;for(var F=[],Z=0,ze=C.length;Z<ze;Z++){var Ee=Ae(f,C[Z]);ne(Ee,E)||F.push(C[Z])}return F}B.generateMoves=R;function T(f,d,v){var m;v===void 0&&(v={});var b=v.sloppy,A=b===void 0?!1:b,k=v.checkPromotion,C=k===void 0?!0:k,E="";if(d.flags&e.BITS.KSIDE_CASTLE)E="O-O";else if(d.flags&e.BITS.QSIDE_CASTLE)E="O-O-O";else{var N=n(f,d,A);d.piece!==e.PAWN&&(E+=d.piece.toUpperCase()+N),d.flags&(e.BITS.CAPTURE|e.BITS.EP_CAPTURE)&&(d.piece===e.PAWN&&(E+=r.algebraic(d.from)[0]),E+="x"),E+=r.algebraic(d.to),C&&d.flags&e.BITS.PROMOTION&&(E+="="+((m=d.promotion)===null||m===void 0?void 0:m.toUpperCase()))}var G=Ae(f,d);return fe(G)&&(Ie(G)?E+="#":E+="+"),E}B.moveToSan=T;function I(f,d,v){v===void 0&&(v={});var m=v.sloppy,b=m===void 0?!1:m,A=v.checkPromotion,k=A===void 0?!0:A,C=r.strippedSan(d),E,N,G,q,ee;b&&(E=C.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),E&&(N=E[1],G=E[2],q=E[3],ee=E[4]));for(var Y=R(f,{square:G}),j=0,Z=Y.length;j<Z;j++){var he=T(f,Y[j],{checkPromotion:k});if(C===r.strippedSan(he)||b&&C===r.strippedSan(T(f,Y[j],v))||G&&q&&r.isSquare(G)&&r.isSquare(q)&&E&&(!N||N.toLowerCase()==Y[j].piece)&&e.SQUARES[G]==Y[j].from&&e.SQUARES[q]==Y[j].to&&(!k||!ee||ee.toLowerCase()==Y[j].promotion))return Y[j]}return null}B.sanToMove=I;function ve(f,d){var v=p(d),m="";for(var b in e.BITS)r.isFlagKey(b)&&e.BITS[b]&v.flags&&(m+=e.FLAGS[b]);return{to:r.algebraic(v.to),from:r.algebraic(v.from),color:v.color,flags:m,piece:v.piece,san:T(f,v),captured:v.captured,promotion:v.promotion}}B.makePretty=ve;function de(f,d,v){for(var m,b=e.SQUARES.a8;b<=e.SQUARES.h1;b++){if(b&136){b+=7;continue}if(!(f.board[b]==null||((m=f.board[b])===null||m===void 0?void 0:m.color)!==d)){var A=f.board[b],k=b-v,C=k+119;if(A&&e.ATTACKS[C]&1<<e.SHIFTS[A.type]){if(A.type===e.PAWN){if(k>0){if(A.color===e.WHITE)return!0}else if(A.color===e.BLACK)return!0;continue}if(A.type==="n"||A.type==="k")return!0;for(var E=e.RAYS[C],N=b+E,G=!1;N!==v;){if(f.board[N]){G=!0;break}N+=E}if(!G)return!0}}}return!1}B.isAttacked=de;function ne(f,d){return de(f,r.swapColor(d),f.kings[d])}B.isKingAttacked=ne;function fe(f){return ne(f,f.turn)}B.inCheck=fe;function Ie(f){return fe(f)&&R(f).length===0}B.inCheckmate=Ie;function $(f){return!fe(f)&&R(f).length===0}B.inStalemate=$;function ge(f){for(var d={},v=[],m=0,b=0,A=e.SQUARES.a8;A<=e.SQUARES.h1;A++){if(b=(b+1)%2,A&136){A+=7;continue}var k=f.board[A];k&&(d[k.type]=k.type in d?d[k.type]+1:1,k.type===e.BISHOP&&v.push(b),m++)}if(m===2)return!0;if(m===3&&(d[e.BISHOP]===1||d[e.KNIGHT]===1))return!0;if(m===d[e.BISHOP]+2){for(var C=0,E=v.length,A=0;A<E;A++)C+=v[A];if(C===0||C===E)return!0}return!1}B.insufficientMaterial=ge;function Ae(f,d){var v=f.clone(),m=v.turn,b=r.swapColor(m);v.board[d.to]=v.board[d.from],delete v.board[d.from],d.flags&e.BITS.EP_CAPTURE&&(v.turn===e.BLACK?delete v.board[d.to-16]:delete v.board[d.to+16]),d.flags&e.BITS.PROMOTION&&d.promotion&&r.isPieceSymbol(d.promotion)&&(v.board[d.to]={type:d.promotion,color:m});var A=v.board[d.to];if(A&&A.type===e.KING){if(v.kings[A.color]=d.to,d.flags&e.BITS.KSIDE_CASTLE){var k=d.to-1,C=d.to+1;v.board[k]=v.board[C],delete v.board[C]}else if(d.flags&e.BITS.QSIDE_CASTLE){var k=d.to+1,C=d.to-2;v.board[k]=v.board[C],delete v.board[C]}v.castling[m]=0}if(v.castling[m]){for(var E=0,N=e.ROOKS[m].length;E<N;E++)if(d.from===e.ROOKS[m][E].square&&v.castling[m]&e.ROOKS[m][E].flag){v.castling[m]^=e.ROOKS[m][E].flag;break}}if(v.castling[b]){for(var E=0,N=e.ROOKS[b].length;E<N;E++)if(d.to===e.ROOKS[b][E].square&&v.castling[b]&e.ROOKS[b][E].flag){v.castling[b]^=e.ROOKS[b][E].flag;break}}return d.flags&e.BITS.BIG_PAWN?v.turn==="b"?v.ep_square=d.to-16:v.ep_square=d.to+16:v.ep_square=e.EMPTY,d.piece===e.PAWN||d.flags&(e.BITS.CAPTURE|e.BITS.EP_CAPTURE)?v.half_moves=0:v.half_moves++,v.turn===e.BLACK&&v.move_number++,v.turn=r.swapColor(v.turn),v}B.makeMove=Ae;function O(f,d,v,m,b){var A,k={color:f.turn,from:d,to:v,flags:m,piece:f.board[d].type};return b&&r.isPieceSymbol(b)&&(k.flags|=e.BITS.PROMOTION,k.promotion=b),f.board[v]?k.captured=(A=f.board[v])===null||A===void 0?void 0:A.type:m&e.BITS.EP_CAPTURE&&(k.captured=e.PAWN),k}B.buildMove=O;function H(f,d){d===void 0&&(d=`
`);var v=e.RANKS.map(function(m){for(var b=f.slice(m*16,m*16+8),A=[],k=0,C=b;k<C.length;k++){var E=C[k];A.push(E?" "+r.symbol(E)+" ":" . ")}var N=A.join("");return"87654321"[m]+" |"+N+"|"});return["  +------------------------+",v.join(d),"  +------------------------+","    a  b  c  d  e  f  g  h"].join(d)}B.ascii=H;function _e(f){for(var d=[],v=[],m=e.SQUARES.a8;m<=e.SQUARES.h1;m++){var b=f[m];b==null?v.push(null):v.push({type:b.type,color:b.color}),m+1&136&&(d.push(v),v=[],m+=8)}return d}B.getBoard=_e;function we(f,d,v){v===void 0&&(v={});var m=v.checkPromotion,b=m===void 0?!0:m;if(typeof d=="string")return I(f,d,v);if(typeof d=="object")for(var A=R(f,{square:d.from}),k=0,C=A;k<C.length;k++){var E=C[k];if(d.from===r.algebraic(E.from)&&d.to===r.algebraic(E.to)&&(!b||!("promotion"in E)||d.promotion===E.promotion))return E}return null}return B.validateMove=we,B}var tr=Kr&&Kr.__assign||function(){return tr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},tr.apply(this,arguments)},di=Kr&&Kr.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.Chess=void 0;var ce=Zi(),hi=Jn(),dr=ue,hr=rr,Ra=function(){function e(t){if(t===void 0&&(t=hr.DEFAULT_POSITION),this._state=new hi.State,this._history=[],this._header={},this._comments={},!this.load(t))throw new Error("Error loading fen")}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state.clone()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return di(this._history.map(function(t){return t.state.clone()}),[this.state])},enumerable:!1,configurable:!0}),e.prototype.load=function(t,r){r===void 0&&(r=!1);var n=ce.loadFen(t);return n?(this._state=n,this._history=[],r||(this._header={}),this._comments={},this.updateSetup(),!0):!1},e.prototype.clear=function(t){t===void 0&&(t=!1),this._state=new hi.State,this._history=[],t||(this._header={}),this._comments={},this.updateSetup()},e.prototype.reset=function(){this.load(hr.DEFAULT_POSITION)},e.prototype.get=function(t){return ce.getPiece(this._state,t)},e.prototype.put=function(t,r){var n=ce.putPiece(this._state,t,r);return n?(this._state=n,this.updateSetup(),!0):!1},e.prototype.remove=function(t){var r=ce.getPiece(this._state,t);if(!r)return null;var n=ce.removePiece(this._state,t);return n?(this._state=n,r):null},e.prototype.moves=function(t){var r=this;t===void 0&&(t={});var n=t.square,o=t.verbose,i=o===void 0?!1:o,a=ce.generateMoves(this._state,{square:n});return i?a.map(function(c){return ce.makePretty(r._state,c)}):a.map(function(c){return ce.moveToSan(r._state,c)})},e.prototype.fen=function(){return this._state.fen},e.prototype.inCheck=function(){return ce.inCheck(this._state)},e.prototype.inCheckmate=function(){return ce.inCheckmate(this._state)},e.prototype.inStalemate=function(){return ce.inStalemate(this._state)},e.prototype.insufficientMaterial=function(){return ce.insufficientMaterial(this._state)},e.prototype.inThreefoldRepetition=function(){for(var t={},r=function(a){var c=a.fen.split(" ").slice(0,4).join(" ");return t[c]=c in t?t[c]+1:1,t[c]>=3},n=0,o=this._history;n<o.length;n++){var i=o[n].state;if(r(i))return!0}return r(this._state)},e.prototype.inDraw=function(){return this._state.half_moves>=100||this.inStalemate()||this.insufficientMaterial()||this.inThreefoldRepetition()},e.prototype.gameOver=function(){return this.inCheckmate()||this.inDraw()},e.prototype.board=function(){return ce.getBoard(this._state.board)},e.prototype.pgn=function(t){return t===void 0&&(t={}),ce.getPgn(this._state,this._header,this._comments,this._history,t)},e.prototype.loadPgn=function(t,r){r===void 0&&(r={});var n=ce.loadPgn(t,r);if(!n)return!1;var o=n[0],i=n[1],a=n[2],c=n[3];return this._state=o,this._header=i,this._comments=a,this._history=c,!0},e.prototype.header=function(){return this._header},e.prototype.setHeader=function(t){this._header=t},e.prototype.addHeader=function(t,r){this._header[t]=r},e.prototype.removeHeader=function(t){delete this._header[t]},e.prototype.clearHeader=function(){this._header={}},e.prototype.ascii=function(t){return t===void 0&&(t=`
`),ce.ascii(this._state.board,t)},e.prototype.turn=function(){return this._state.turn},e.prototype.move=function(t,r){r===void 0&&(r={});var n=ce.validateMove(this._state,t,r);if(!n)return null;var o=ce.makePretty(this._state,n);return r.dry_run||this.makeMove(n),o},e.prototype.validateMoves=function(t,r){r===void 0&&(r={});for(var n=[],o=this._state,i=0,a=t;i<a.length;i++){var c=a[i],h=ce.validateMove(o,c,r);if(!h)return null;n.push(ce.makePretty(o,h)),o=ce.makeMove(o,h)}return n},e.prototype.isPromotion=function(t,r){r===void 0&&(r={});var n=ce.validateMove(this._state,t,tr(tr({},r),{checkPromotion:!1}));return n?!!(n.flags&hr.BITS.PROMOTION):!1},e.prototype.undo=function(){var t=this.undoMove();return t?ce.makePretty(this._state,t):null},e.prototype.squareColor=function(t){if(dr.isSquare(t)){var r=hr.SQUARES[t];return(dr.rank(r)+dr.file(r))%2===0?"light":"dark"}return null},e.prototype.history=function(t){t===void 0&&(t={});var r=t.verbose,n=r===void 0?!1:r;if(!this._history.length)return[];var o;return n?this._history.map(function(i){var a=i.move;return o=i.state,ce.makePretty(o,a)}):this._history.map(function(i){var a=i.move;return o=i.state,ce.moveToSan(o,a)})},e.prototype.getComment=function(t){return t=t||this.fen(),this._comments[t]},e.prototype.getComments=function(){var t=this;return this.pruneComments(),Object.keys(this._comments).map(function(r){return{fen:r,comment:t._comments[r]}})},e.prototype.setComment=function(t,r){r=r||this.fen(),this._comments[r]=t.replace("{","[").replace("}","]")},e.prototype.deleteComment=function(t){t=t||this.fen();var r=this._comments[t];return delete this._comments[t],r},e.prototype.deleteComments=function(){var t=this;return this.pruneComments(),Object.keys(this._comments).map(function(r){var n=t._comments[r];return delete t._comments[r],{fen:r,comment:n}})},e.prototype.validateFen=function(t){return dr.validateFen(t)},e.prototype.clone=function(){var t=new e;return t._state=this._state,t._history=di(this._history),t._header=tr({},this._header),t._comments=tr({},this._comments),t},e.prototype.perft=function(t){for(var r=ce.generateMoves(this._state,{legal:!1}),n=0,o=this._state.turn,i=0,a=r.length;i<a;i++){if(this.makeMove(r[i]),!this.kingAttacked(o))if(t-1>0){var c=this.perft(t-1);n+=c}else n++;this.undoMove()}return n},e.prototype.updateSetup=function(){var t=this._state.fen;this._history.length>0||(t!==hr.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=t):(delete this._header.SetUp,delete this._header.FEN))},e.prototype.pruneComments=function(){var t=this,r={},n=function(i){i in t._comments&&(r[i]=t._comments[i])};this._history.forEach(function(i){var a=i.state;o=a,n(o.fen)});var o=this._state;n(o.fen),this._comments=r},e.prototype.strippedSan=function(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")},e.prototype.attacked=function(t,r){return ce.isAttacked(this._state,t,r)},e.prototype.kingAttacked=function(t){return this.attacked(dr.swapColor(t),this._state.kings[t])},e.prototype.makeMove=function(t){this._history.push({move:t,state:this._state}),this._state=ce.makeMove(this._state,t)},e.prototype.undoMove=function(){var t=this._history.pop();return t==null?null:(this._state=t.state,t.move)},e}();Dr.Chess=Ra;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Dr;Object.defineProperty(e,"Chess",{enumerable:!0,get:function(){return t.Chess}});var r=Jn();Object.defineProperty(e,"State",{enumerable:!0,get:function(){return r.State}});var n=rr;Object.defineProperty(e,"WHITE",{enumerable:!0,get:function(){return n.WHITE}}),Object.defineProperty(e,"BLACK",{enumerable:!0,get:function(){return n.BLACK}}),Object.defineProperty(e,"PAWN",{enumerable:!0,get:function(){return n.PAWN}}),Object.defineProperty(e,"KNIGHT",{enumerable:!0,get:function(){return n.KNIGHT}}),Object.defineProperty(e,"BISHOP",{enumerable:!0,get:function(){return n.BISHOP}}),Object.defineProperty(e,"ROOK",{enumerable:!0,get:function(){return n.ROOK}}),Object.defineProperty(e,"QUEEN",{enumerable:!0,get:function(){return n.QUEEN}}),Object.defineProperty(e,"KING",{enumerable:!0,get:function(){return n.KING}}),Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return n.EMPTY}}),Object.defineProperty(e,"SQUARES",{enumerable:!0,get:function(){return n.SQUARES}}),Object.defineProperty(e,"FLAGS",{enumerable:!0,get:function(){return n.FLAGS}}),Object.defineProperty(e,"BITS",{enumerable:!0,get:function(){return n.BITS}});var o=ue;Object.defineProperty(e,"rank",{enumerable:!0,get:function(){return o.rank}}),Object.defineProperty(e,"file",{enumerable:!0,get:function(){return o.file}}),Object.defineProperty(e,"algebraic",{enumerable:!0,get:function(){return o.algebraic}})})(Dn);function pi(e,t,r){const n=e.slice();return n[53]=t[r],n[55]=r,n}function Ka(e){let t,r,n,o,i,a,c,h;return{c(){t=S("div"),r=W("svg"),n=W("path"),o=W("path"),i=L(),a=S("span"),c=Q("Loading..."),h=Q(`

Chess Path`),this.h()},l(p){t=y(p,"DIV",{role:!0});var P=g(t);r=x(P,"svg",{"aria-hidden":!0,class:!0,viewBox:!0,fill:!0,xmlns:!0});var _=g(r);n=x(_,"path",{d:!0,fill:!0}),g(n).forEach(u),o=x(_,"path",{d:!0,fill:!0}),g(o).forEach(u),_.forEach(u),i=z(P),a=y(P,"SPAN",{class:!0});var M=g(a);c=V(M,"Loading..."),M.forEach(u),P.forEach(u),h=V(p,`

Chess Path`),this.h()},h(){l(n,"d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"),l(n,"fill","currentColor"),l(o,"d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"),l(o,"fill","currentFill"),l(r,"aria-hidden","true"),l(r,"class","mr-2 w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600"),l(r,"viewBox","0 0 100 101"),l(r,"fill","none"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(a,"class","sr-only"),l(t,"role","status")},m(p,P){X(p,t,P),s(t,r),s(r,n),s(r,o),s(t,i),s(t,a),s(a,c),X(p,h,P)},p:st,d(p){p&&u(t),p&&u(h)}}}function La(e){let t,r,n,o,i,a,c,h,p,P,_=e[1].name+"",M,R,T,I,ve,de,ne,fe,Ie,$,ge,Ae,O,H,_e,we,f,d,v,m,b,A,k,C,E,N,G,q,ee,Y,j,Z,he,ae,oe,te,le,ze,ke,Pe,Ce,Oe,F,Ee,K,D,se,re,J,Te,ie,Se,Ne,be,De,Ht,lt,Ct,Ur,gr,Xe,mr,At,Me,Tt,qr,Hr,Ft,Fr,Qr,ct,nr,Vr,jr,He,$e,Wr,ut,xr,ft,Gr,Yr,dt,or,Zr,Jr,Fe,et,Xr,ht,$r,pt,en,tn,vt,ir,rn,nn,Qe,on,Qt,It,ln,br,tt,_r,Ot,Be,Nt,an,sn,Vt,cn,un,gt,jt,fn,dn,rt,hn,nt,Wt,pn,vn,xt,gn,mn,Mt,bn,_n,ot,Gt,wn,Sn,Yt,yn,En,mt,Bt,Ge,lr,Pn,Rt,kn,Zt,Kt,Cn,An,Xn;function $n(w,U){return w[2]?Da:za}let wr=$n(e),Ye=wr(e),Jt=e[1].puzzles,Re=[];for(let w=0;w<Jt.length;w+=1)Re[w]=gi(pi(e,Jt,w));let Ke=e[2]&&mi(e);function eo(w,U){return w[14].state=="correct"?Fa:w[14].state=="wrong"?Ha:w[14].state=="done"?qa:Ua}let Sr=eo(e),Ze=Sr(e),Le=e[6].length&&bi(e);return{c(){t=S("div"),r=S("div"),i=L(),a=S("div"),c=S("div"),h=S("div"),p=S("div"),P=S("p"),M=Q(_),R=L(),Ye.c(),T=L(),I=S("div");for(let w=0;w<Re.length;w+=1)Re[w].c();ve=L(),Ke&&Ke.c(),de=L(),ne=S("div"),fe=S("div"),Ie=S("button"),$=W("svg"),ge=W("path"),Ae=L(),O=S("button"),H=W("svg"),_e=W("path"),we=W("path"),f=L(),d=S("button"),v=W("svg"),m=W("path"),b=W("path"),A=L(),k=S("button"),C=W("svg"),E=W("path"),N=W("path"),G=L(),q=S("div"),ee=S("div"),Ze.c(),Z=L(),he=S("input"),ae=L(),oe=S("div"),te=S("div"),le=S("label"),ze=Q("\u2715"),ke=L(),Pe=S("h3"),Ce=Q("Create New Puzzle"),Oe=L(),F=S("form"),Le&&Le.c(),Ee=L(),K=S("div"),D=S("p"),se=Q("Starting Position FEN"),re=L(),J=S("input"),Te=L(),ie=S("div"),Se=S("p"),Ne=Q("Correct Variations"),be=L(),De=S("textarea"),Ht=L(),lt=S("div"),Ct=S("button"),Ur=Q("create"),gr=L(),Xe=S("input"),mr=L(),At=S("div"),Me=S("div"),Tt=S("label"),qr=Q("\u2715"),Hr=L(),Ft=S("h3"),Fr=Q("Create New Puzzle"),Qr=L(),ct=S("div"),nr=S("p"),Vr=Q("Peice Set"),jr=L(),He=S("select"),$e=S("option"),Wr=Q("Piece Set"),ut=S("option"),xr=Q("merida"),ft=S("option"),Gr=Q("gioco"),Yr=L(),dt=S("div"),or=S("p"),Zr=Q("Board Theme"),Jr=L(),Fe=S("select"),et=S("option"),Xr=Q("Board Theme"),ht=S("option"),$r=Q("brown"),pt=S("option"),en=Q("blue"),tn=L(),vt=S("div"),ir=S("p"),rn=Q("Board Size"),nn=L(),Qe=S("input"),on=L(),Qt=S("div"),It=S("label"),ln=Q("save & close"),br=L(),tt=S("input"),_r=L(),Ot=S("div"),Be=S("div"),Nt=S("label"),an=Q("\u2715"),sn=L(),Vt=S("h3"),cn=Q("Set Options"),un=L(),gt=S("div"),jt=S("p"),fn=Q("Set Name"),dn=L(),rt=S("input"),hn=L(),nt=S("div"),Wt=S("p"),pn=Q("Delete Set"),vn=L(),xt=S("p"),gn=Q("Set will be permanatly deleted."),mn=L(),Mt=S("button"),bn=Q("delete set"),_n=L(),ot=S("div"),Gt=S("p"),wn=Q("Share Set"),Sn=L(),Yt=S("p"),yn=Q("Everybody with this link can practice your set."),En=L(),mt=S("div"),Bt=S("button"),Ge=W("svg"),lr=W("path"),Pn=L(),Rt=S("input"),kn=L(),Zt=S("div"),Kt=S("label"),Cn=Q("save & close"),this.h()},l(w){t=y(w,"DIV",{class:!0});var U=g(t);r=y(U,"DIV",{class:!0,style:!0}),g(r).forEach(u),i=z(U),a=y(U,"DIV",{style:!0,class:!0});var me=g(a);c=y(me,"DIV",{class:!0});var ar=g(c);h=y(ar,"DIV",{class:!0});var yr=g(h);p=y(yr,"DIV",{class:!0});var to=g(p);P=y(to,"P",{class:!0});var ro=g(P);M=V(ro,_),ro.forEach(u),to.forEach(u),R=z(yr),Ye.l(yr),yr.forEach(u),ar.forEach(u),T=z(me),I=y(me,"DIV",{class:!0});var Er=g(I);for(let Nn=0;Nn<Re.length;Nn+=1)Re[Nn].l(Er);ve=z(Er),Ke&&Ke.l(Er),Er.forEach(u),de=z(me),ne=y(me,"DIV",{class:!0});var no=g(ne);fe=y(no,"DIV",{class:!0});var bt=g(fe);Ie=y(bt,"BUTTON",{class:!0});var oo=g(Ie);$=x(oo,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var io=g($);ge=x(io,"path",{d:!0}),g(ge).forEach(u),io.forEach(u),oo.forEach(u),Ae=z(bt),O=y(bt,"BUTTON",{class:!0});var lo=g(O);H=x(lo,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Tn=g(H);_e=x(Tn,"path",{d:!0}),g(_e).forEach(u),we=x(Tn,"path",{d:!0}),g(we).forEach(u),Tn.forEach(u),lo.forEach(u),f=z(bt),d=y(bt,"BUTTON",{class:!0});var ao=g(d);v=x(ao,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var In=g(v);m=x(In,"path",{d:!0}),g(m).forEach(u),b=x(In,"path",{"fill-rule":!0,d:!0}),g(b).forEach(u),In.forEach(u),ao.forEach(u),A=z(bt),k=y(bt,"BUTTON",{class:!0});var so=g(k);C=x(so,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var On=g(C);E=x(On,"path",{d:!0}),g(E).forEach(u),N=x(On,"path",{d:!0}),g(N).forEach(u),On.forEach(u),so.forEach(u),bt.forEach(u),no.forEach(u),G=z(me),q=y(me,"DIV",{class:!0});var co=g(q);ee=y(co,"DIV",{class:!0});var uo=g(ee);Ze.l(uo),uo.forEach(u),co.forEach(u),me.forEach(u),U.forEach(u),Z=z(w),he=y(w,"INPUT",{type:!0,id:!0,class:!0}),ae=z(w),oe=y(w,"DIV",{class:!0});var fo=g(oe);te=y(fo,"DIV",{class:!0});var Xt=g(te);le=y(Xt,"LABEL",{for:!0,class:!0});var ho=g(le);ze=V(ho,"\u2715"),ho.forEach(u),ke=z(Xt),Pe=y(Xt,"H3",{class:!0});var po=g(Pe);Ce=V(po,"Create New Puzzle"),po.forEach(u),Oe=z(Xt),F=y(Xt,"FORM",{class:!0});var _t=g(F);Le&&Le.l(_t),Ee=z(_t),K=y(_t,"DIV",{class:!0});var Pr=g(K);D=y(Pr,"P",{});var vo=g(D);se=V(vo,"Starting Position FEN"),vo.forEach(u),re=z(Pr),J=y(Pr,"INPUT",{type:!0,maxlength:!0,class:!0,placeholder:!0}),Pr.forEach(u),Te=z(_t),ie=y(_t,"DIV",{class:!0});var kr=g(ie);Se=y(kr,"P",{});var go=g(Se);Ne=V(go,"Correct Variations"),go.forEach(u),be=z(kr),De=y(kr,"TEXTAREA",{maxlength:!0,type:!0,class:!0,placeholder:!0}),g(De).forEach(u),kr.forEach(u),Ht=z(_t),lt=y(_t,"DIV",{class:!0});var mo=g(lt);Ct=y(mo,"BUTTON",{class:!0,type:!0});var bo=g(Ct);Ur=V(bo,"create"),bo.forEach(u),mo.forEach(u),_t.forEach(u),Xt.forEach(u),fo.forEach(u),gr=z(w),Xe=y(w,"INPUT",{type:!0,id:!0,class:!0}),mr=z(w),At=y(w,"DIV",{class:!0});var _o=g(At);Me=y(_o,"DIV",{class:!0});var Ve=g(Me);Tt=y(Ve,"LABEL",{for:!0,class:!0});var wo=g(Tt);qr=V(wo,"\u2715"),wo.forEach(u),Hr=z(Ve),Ft=y(Ve,"H3",{class:!0});var So=g(Ft);Fr=V(So,"Create New Puzzle"),So.forEach(u),Qr=z(Ve),ct=y(Ve,"DIV",{class:!0});var Cr=g(ct);nr=y(Cr,"P",{});var yo=g(nr);Vr=V(yo,"Peice Set"),yo.forEach(u),jr=z(Cr),He=y(Cr,"SELECT",{class:!0});var Ar=g(He);$e=y(Ar,"OPTION",{});var Eo=g($e);Wr=V(Eo,"Piece Set"),Eo.forEach(u),ut=y(Ar,"OPTION",{});var Po=g(ut);xr=V(Po,"merida"),Po.forEach(u),ft=y(Ar,"OPTION",{});var ko=g(ft);Gr=V(ko,"gioco"),ko.forEach(u),Ar.forEach(u),Cr.forEach(u),Yr=z(Ve),dt=y(Ve,"DIV",{class:!0});var Tr=g(dt);or=y(Tr,"P",{});var Co=g(or);Zr=V(Co,"Board Theme"),Co.forEach(u),Jr=z(Tr),Fe=y(Tr,"SELECT",{class:!0});var Ir=g(Fe);et=y(Ir,"OPTION",{});var Ao=g(et);Xr=V(Ao,"Board Theme"),Ao.forEach(u),ht=y(Ir,"OPTION",{});var To=g(ht);$r=V(To,"brown"),To.forEach(u),pt=y(Ir,"OPTION",{});var Io=g(pt);en=V(Io,"blue"),Io.forEach(u),Ir.forEach(u),Tr.forEach(u),tn=z(Ve),vt=y(Ve,"DIV",{class:!0});var Or=g(vt);ir=y(Or,"P",{});var Oo=g(ir);rn=V(Oo,"Board Size"),Oo.forEach(u),nn=z(Or),Qe=y(Or,"INPUT",{type:!0,step:!0,min:!0,max:!0,class:!0}),Or.forEach(u),on=z(Ve),Qt=y(Ve,"DIV",{class:!0});var No=g(Qt);It=y(No,"LABEL",{for:!0,class:!0});var Mo=g(It);ln=V(Mo,"save & close"),Mo.forEach(u),No.forEach(u),Ve.forEach(u),_o.forEach(u),br=z(w),tt=y(w,"INPUT",{type:!0,id:!0,class:!0}),_r=z(w),Ot=y(w,"DIV",{class:!0});var Bo=g(Ot);Be=y(Bo,"DIV",{class:!0});var je=g(Be);Nt=y(je,"LABEL",{for:!0,class:!0});var Ro=g(Nt);an=V(Ro,"\u2715"),Ro.forEach(u),sn=z(je),Vt=y(je,"H3",{class:!0});var Ko=g(Vt);cn=V(Ko,"Set Options"),Ko.forEach(u),un=z(je),gt=y(je,"DIV",{class:!0});var Nr=g(gt);jt=y(Nr,"P",{class:!0});var Lo=g(jt);fn=V(Lo,"Set Name"),Lo.forEach(u),dn=z(Nr),rt=y(Nr,"INPUT",{class:!0,placeholder:!0}),Nr.forEach(u),hn=z(je),nt=y(je,"DIV",{class:!0});var $t=g(nt);Wt=y($t,"P",{class:!0});var zo=g(Wt);pn=V(zo,"Delete Set"),zo.forEach(u),vn=z($t),xt=y($t,"P",{class:!0});var Do=g(xt);gn=V(Do,"Set will be permanatly deleted."),Do.forEach(u),mn=z($t),Mt=y($t,"BUTTON",{class:!0});var Uo=g(Mt);bn=V(Uo,"delete set"),Uo.forEach(u),$t.forEach(u),_n=z(je),ot=y(je,"DIV",{class:!0});var er=g(ot);Gt=y(er,"P",{class:!0});var qo=g(Gt);wn=V(qo,"Share Set"),qo.forEach(u),Sn=z(er),Yt=y(er,"P",{class:!0});var Ho=g(Yt);yn=V(Ho,"Everybody with this link can practice your set."),Ho.forEach(u),En=z(er),mt=y(er,"DIV",{class:!0});var Mr=g(mt);Bt=y(Mr,"BUTTON",{class:!0});var Fo=g(Bt);Ge=x(Fo,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Qo=g(Ge);lr=x(Qo,"path",{d:!0}),g(lr).forEach(u),Qo.forEach(u),Fo.forEach(u),Pn=z(Mr),Rt=y(Mr,"INPUT",{class:!0,placeholder:!0}),Mr.forEach(u),er.forEach(u),kn=z(je),Zt=y(je,"DIV",{class:!0});var Vo=g(Zt);Kt=y(Vo,"LABEL",{for:!0,class:!0});var jo=g(Kt);Cn=V(jo,"save & close"),jo.forEach(u),Vo.forEach(u),je.forEach(u),Bo.forEach(u),this.h()},h(){l(r,"class","mx-8 lg:mt-0 mt-24"),Lt(r,"width",e[9]+"px"),Lt(r,"height",e[9]+"px"),Lt(r,"aspect-ratio","1"),l(P,"class","text-2xl mt-2"),l(p,"class","flex flex-nowrap"),l(h,"class","flex justify-between"),l(c,"class","p-1 border-b-gray-500 dark:border-b-gray-300 border-b-[1px] mx-2 flex flex-col content-center justify-center"),l(I,"class","h-full overflow-y-scroll"),l(ge,"d","M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"),l($,"xmlns","http://www.w3.org/2000/svg"),l($,"width","52"),l($,"height","52"),l($,"fill","currentColor"),l($,"class","bi bi-lightbulb"),l($,"viewBox","0 0 16 16"),l(Ie,"class","btn btn-ghost h-14"),l(_e,"d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"),l(we,"d","M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"),l(H,"xmlns","http://www.w3.org/2000/svg"),l(H,"width","52"),l(H,"height","52"),l(H,"fill","currentColor"),l(H,"class","bi bi-question-circle"),l(H,"viewBox","0 0 16 16"),l(O,"class","btn btn-ghost h-14"),l(m,"d","M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"),l(b,"fill-rule","evenodd"),l(b,"d","M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"),l(v,"xmlns","http://www.w3.org/2000/svg"),l(v,"width","52"),l(v,"height","52"),l(v,"fill","currentColor"),l(v,"class","bi bi-arrow-repeat"),l(v,"viewBox","0 0 16 16"),l(d,"class","btn btn-ghost h-14"),l(E,"d","M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"),l(N,"d","M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"),l(C,"xmlns","http://www.w3.org/2000/svg"),l(C,"width","52"),l(C,"height","52"),l(C,"fill","currentColor"),l(C,"class","bi bi-gear"),l(C,"viewBox","0 0 16 16"),l(k,"class","btn btn-ghost h-14"),l(fe,"class","w-full px-2 flex justify-between flex-wrap"),l(ne,"class","h-32 border-y-gray-500 dark:border-y-gray-300 border-y-[1px] m-2 flex flex-col items-center justify-center"),l(ee,"class",Y="flex flex-nowrap items-center justify-center text-white "+(e[14].animate?"bounce":"")+" svelte-1274svt"),l(q,"class",j=(e[14].state=="wrong"?"bg-red-400":e[14].state=="done"?"bg-green-500":"bg-cyan-500")+" py-12 p-3 text-xl flex flex-col items-center justify-center"),Lt(a,"height",e[9]+"px"),l(a,"class","w-full lg:w-[20vw] bg-gray-200 dark:bg-gray-900 flex flex-col rounded-lg"),l(t,"class","w-full lg:p-8 lg:-mt-10 mt-20 flex flex-wrap justify-center"),l(he,"type","checkbox"),l(he,"id","create-modal"),l(he,"class","modal-toggle"),l(le,"for","create-modal"),l(le,"class","btn btn-sm btn-circle absolute right-2 top-2"),l(Pe,"class","font-bold text-lg mb-2 -mt-2"),l(J,"type","text"),l(J,"maxlength","100"),l(J,"class","input input-bordered input-primary w-full max-w-xs"),J.required=!0,l(J,"placeholder","Example: 4k3/3ppp2/3p4/2p5/2P4Q/r2PR3/4PPq1/4K3 w - - 0 1"),l(K,"class","my-3"),l(De,"maxlength","1000"),l(De,"type","textarea"),l(De,"class","input input-bordered input-primary h-24 w-full max-w-xs"),De.required=!0,l(De,"placeholder","Example: 1. Qxe7# (1. Qh8+ Qg8 2. Qxg8#)"),l(ie,"class","my-3"),l(Ct,"class","btn"),l(Ct,"type","submit"),l(lt,"class","modal-action"),l(F,"class","my-5"),l(te,"class","modal-box"),l(oe,"class","modal"),l(Xe,"type","checkbox"),l(Xe,"id","board-settings-modal"),l(Xe,"class","modal-toggle"),l(Tt,"for","board-settings-modal"),l(Tt,"class","btn btn-sm btn-circle absolute right-2 top-2"),l(Ft,"class","font-bold text-lg mb-2 -mt-2"),$e.disabled=!0,$e.selected=!0,$e.__value="Piece Set",$e.value=$e.__value,ut.__value="merida",ut.value=ut.__value,ft.__value="gioco",ft.value=ft.__value,l(He,"class","select select-bordered w-full max-w-xs"),e[11]===void 0&&Yo(()=>e[37].call(He)),l(ct,"class","my-3"),et.disabled=!0,et.selected=!0,et.__value="Board Theme",et.value=et.__value,ht.__value="brown",ht.value=ht.__value,pt.__value="blue",pt.value=pt.__value,l(Fe,"class","select select-bordered w-full max-w-xs"),e[10]===void 0&&Yo(()=>e[38].call(Fe)),l(dt,"class","my-3"),l(Qe,"type","range"),l(Qe,"step","25"),l(Qe,"min","300"),l(Qe,"max","1000"),l(Qe,"class","range range-accent range-sm"),l(vt,"class","my-3"),l(It,"for","board-settings-modal"),l(It,"class","btn btn-success btn-outline w-full"),l(Qt,"class","modal-action"),l(Me,"class","modal-box"),l(At,"class","modal"),l(tt,"type","checkbox"),l(tt,"id","set-settings-modal"),l(tt,"class","modal-toggle"),l(Nt,"for","set-settings-modal"),l(Nt,"class","btn btn-sm btn-circle absolute right-2 top-2"),l(Vt,"class","font-bold text-lg mb-2 -mt-2"),l(jt,"class","font-extrabold"),l(rt,"class","input input-sm input-primary"),l(rt,"placeholder","change set name"),l(gt,"class","my-3"),l(Wt,"class","font-extrabold"),l(xt,"class","text-sm"),l(Mt,"class","btn btn-error btn-sm"),l(nt,"class","my-3"),l(Gt,"class","font-extrabold"),l(Yt,"class","text-sm"),l(lr,"d","M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"),l(Ge,"xmlns","http://www.w3.org/2000/svg"),l(Ge,"width","22"),l(Ge,"height","22"),l(Ge,"fill","currentColor"),l(Ge,"class","bi bi-envelope"),l(Ge,"viewBox","0 0 16 16"),l(Bt,"class","btn btn-square btn-success btn-sm"),Rt.disabled=!0,l(Rt,"class","input input-sm input-primary"),Rt.value=window.location.href,l(Rt,"placeholder","change set name"),l(mt,"class","flex flex-nowrap"),l(ot,"class","my-3"),l(Kt,"for","set-settings-modal"),l(Kt,"class","btn btn-info btn-outline w-full"),l(Zt,"class","modal-action"),l(Be,"class","modal-box"),l(Ot,"class","modal")},m(w,U){X(w,t,U),s(t,r),s(t,i),s(t,a),s(a,c),s(c,h),s(h,p),s(p,P),s(P,M),s(h,R),Ye.m(h,null),s(a,T),s(a,I);for(let me=0;me<Re.length;me+=1)Re[me].m(I,null);s(I,ve),Ke&&Ke.m(I,null),s(a,de),s(a,ne),s(ne,fe),s(fe,Ie),s(Ie,$),s($,ge),s(fe,Ae),s(fe,O),s(O,H),s(H,_e),s(H,we),s(fe,f),s(fe,d),s(d,v),s(v,m),s(v,b),s(fe,A),s(fe,k),s(k,C),s(C,E),s(C,N),s(a,G),s(a,q),s(q,ee),Ze.m(ee,null),X(w,Z,U),X(w,he,U),he.checked=e[3],X(w,ae,U),X(w,oe,U),s(oe,te),s(te,le),s(le,ze),s(te,ke),s(te,Pe),s(Pe,Ce),s(te,Oe),s(te,F),Le&&Le.m(F,null),s(F,Ee),s(F,K),s(K,D),s(D,se),s(K,re),s(K,J),wt(J,e[7]),s(F,Te),s(F,ie),s(ie,Se),s(Se,Ne),s(ie,be),s(ie,De),wt(De,e[8]),s(F,Ht),s(F,lt),s(lt,Ct),s(Ct,Ur),X(w,gr,U),X(w,Xe,U),Xe.checked=e[5],X(w,mr,U),X(w,At,U),s(At,Me),s(Me,Tt),s(Tt,qr),s(Me,Hr),s(Me,Ft),s(Ft,Fr),s(Me,Qr),s(Me,ct),s(ct,nr),s(nr,Vr),s(ct,jr),s(ct,He),s(He,$e),s($e,Wr),s(He,ut),s(ut,xr),s(He,ft),s(ft,Gr),Br(He,e[11]),s(Me,Yr),s(Me,dt),s(dt,or),s(or,Zr),s(dt,Jr),s(dt,Fe),s(Fe,et),s(et,Xr),s(Fe,ht),s(ht,$r),s(Fe,pt),s(pt,en),Br(Fe,e[10]),s(Me,tn),s(Me,vt),s(vt,ir),s(ir,rn),s(vt,nn),s(vt,Qe),wt(Qe,e[9]),s(Me,on),s(Me,Qt),s(Qt,It),s(It,ln),X(w,br,U),X(w,tt,U),tt.checked=e[4],X(w,_r,U),X(w,Ot,U),s(Ot,Be),s(Be,Nt),s(Nt,an),s(Be,sn),s(Be,Vt),s(Vt,cn),s(Be,un),s(Be,gt),s(gt,jt),s(jt,fn),s(gt,dn),s(gt,rt),wt(rt,e[1].name),s(Be,hn),s(Be,nt),s(nt,Wt),s(Wt,pn),s(nt,vn),s(nt,xt),s(xt,gn),s(nt,mn),s(nt,Mt),s(Mt,bn),s(Be,_n),s(Be,ot),s(ot,Gt),s(Gt,wn),s(ot,Sn),s(ot,Yt),s(Yt,yn),s(ot,En),s(ot,mt),s(mt,Bt),s(Bt,Ge),s(Ge,lr),s(mt,Pn),s(mt,Rt),s(Be,kn),s(Be,Zt),s(Zt,Kt),s(Kt,Cn),An||(Xn=[Zo(n=Ea.call(null,r,{config:e[13],initializer:e[16]})),Zo(o=ya.call(null,r,{piecesFolderUrl:"/chess/pieces/"+e[11],boardUrl:"/chess/board/board_"+e[10]+".svg"})),pe(Ie,"click",e[29]),pe(O,"click",e[30]),pe(d,"click",e[31]),pe(k,"click",e[32]),pe(he,"change",e[33]),pe(J,"input",e[34]),pe(De,"input",e[35]),pe(F,"submit",rl(e[18])),pe(Xe,"change",e[36]),pe(He,"change",e[37]),pe(He,"change",e[15]),pe(Fe,"change",e[38]),pe(Fe,"change",e[15]),pe(Qe,"change",e[39]),pe(Qe,"input",e[39]),pe(Qe,"change",e[15]),pe(tt,"change",e[40]),pe(rt,"input",e[41]),pe(rt,"blur",e[42]),pe(Mt,"click",e[21]),pe(Bt,"click",e[43])],An=!0)},p(w,U){if(U[0]&512&&Lt(r,"width",w[9]+"px"),U[0]&512&&Lt(r,"height",w[9]+"px"),n&&Jo(n.update)&&U[0]&8192&&n.update.call(null,{config:w[13],initializer:w[16]}),o&&Jo(o.update)&&U[0]&3072&&o.update.call(null,{piecesFolderUrl:"/chess/pieces/"+w[11],boardUrl:"/chess/board/board_"+w[10]+".svg"}),U[0]&2&&_!==(_=w[1].name+"")&&Un(M,_),wr===(wr=$n(w))&&Ye?Ye.p(w,U):(Ye.d(1),Ye=wr(w),Ye&&(Ye.c(),Ye.m(h,null))),U[0]&4734982){Jt=w[1].puzzles;let me;for(me=0;me<Jt.length;me+=1){const ar=pi(w,Jt,me);Re[me]?Re[me].p(ar,U):(Re[me]=gi(ar),Re[me].c(),Re[me].m(I,ve))}for(;me<Re.length;me+=1)Re[me].d(1);Re.length=Jt.length}w[2]?Ke?Ke.p(w,U):(Ke=mi(w),Ke.c(),Ke.m(I,null)):Ke&&(Ke.d(1),Ke=null),Sr===(Sr=eo(w))&&Ze?Ze.p(w,U):(Ze.d(1),Ze=Sr(w),Ze&&(Ze.c(),Ze.m(ee,null))),U[0]&16384&&Y!==(Y="flex flex-nowrap items-center justify-center text-white "+(w[14].animate?"bounce":"")+" svelte-1274svt")&&l(ee,"class",Y),U[0]&16384&&j!==(j=(w[14].state=="wrong"?"bg-red-400":w[14].state=="done"?"bg-green-500":"bg-cyan-500")+" py-12 p-3 text-xl flex flex-col items-center justify-center")&&l(q,"class",j),U[0]&512&&Lt(a,"height",w[9]+"px"),U[0]&8&&(he.checked=w[3]),w[6].length?Le?Le.p(w,U):(Le=bi(w),Le.c(),Le.m(F,Ee)):Le&&(Le.d(1),Le=null),U[0]&128&&J.value!==w[7]&&wt(J,w[7]),U[0]&256&&wt(De,w[8]),U[0]&32&&(Xe.checked=w[5]),U[0]&2048&&Br(He,w[11]),U[0]&1024&&Br(Fe,w[10]),U[0]&512&&wt(Qe,w[9]),U[0]&16&&(tt.checked=w[4]),U[0]&2&&rt.value!==w[1].name&&wt(rt,w[1].name)},d(w){w&&u(t),Ye.d(),nl(Re,w),Ke&&Ke.d(),Ze.d(),w&&u(Z),w&&u(he),w&&u(ae),w&&u(oe),Le&&Le.d(),w&&u(gr),w&&u(Xe),w&&u(mr),w&&u(At),w&&u(br),w&&u(tt),w&&u(_r),w&&u(Ot),An=!1,ol(Xn)}}}function za(e){let t,r,n,o,i,a;return{c(){t=S("button"),r=W("svg"),n=W("path"),o=W("path"),this.h()},l(c){t=y(c,"BUTTON",{class:!0});var h=g(t);r=x(h,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var p=g(r);n=x(p,"path",{"fill-rule":!0,d:!0}),g(n).forEach(u),o=x(p,"path",{"fill-rule":!0,d:!0}),g(o).forEach(u),p.forEach(u),h.forEach(u),this.h()},h(){l(n,"fill-rule","evenodd"),l(n,"d","M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"),l(o,"fill-rule","evenodd"),l(o,"d","M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","24"),l(r,"height","24"),l(r,"fill","currentColor"),l(r,"class","bi bi-box-arrow-left"),l(r,"viewBox","0 0 16 16"),l(t,"class","btn btn-ghost p-0 w-10 hover:text-red-500")},m(c,h){X(c,t,h),s(t,r),s(r,n),s(r,o),i||(a=pe(t,"click",e[25]),i=!0)},p:st,d(c){c&&u(t),i=!1,a()}}}function Da(e){let t,r,n,o,i;return{c(){t=S("button"),r=W("svg"),n=W("path"),this.h()},l(a){t=y(a,"BUTTON",{class:!0});var c=g(t);r=x(c,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var h=g(r);n=x(h,"path",{"fill-rule":!0,d:!0}),g(n).forEach(u),h.forEach(u),c.forEach(u),this.h()},h(){l(n,"fill-rule","evenodd"),l(n,"d","M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","24"),l(r,"height","24"),l(r,"fill","currentColor"),l(r,"class","bi bi-sliders"),l(r,"viewBox","0 0 16 16"),l(t,"class","btn btn-ghost p-0 w-10")},m(a,c){X(a,t,c),s(t,r),s(r,n),o||(i=pe(t,"click",e[24]),o=!0)},p:st,d(a){a&&u(t),o=!1,i()}}}function vi(e){let t,r,n,o,i,a;function c(){return e[26](e[55])}return{c(){t=S("div"),r=W("svg"),n=W("path"),o=W("path"),this.h()},l(h){t=y(h,"DIV",{class:!0});var p=g(t);r=x(p,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var P=g(r);n=x(P,"path",{d:!0}),g(n).forEach(u),o=x(P,"path",{"fill-rule":!0,d:!0}),g(o).forEach(u),P.forEach(u),p.forEach(u),this.h()},h(){l(n,"d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"),l(o,"fill-rule","evenodd"),l(o,"d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","20"),l(r,"height","20"),l(r,"fill","currentColor"),l(r,"class","bi bi-trash"),l(r,"viewBox","0 0 16 16"),l(t,"class","mt-1 hover:text-red-600 dark:hover:text-red-400")},m(h,p){X(h,t,p),s(t,r),s(r,n),s(r,o),i||(a=pe(t,"click",c),i=!0)},p(h,p){e=h},d(h){h&&u(t),i=!1,a()}}}function gi(e){let t,r,n,o,i=e[55]+1+"",a,c,h,p,P,_=e[2]&&vi(e);function M(){return e[27](e[55])}return{c(){t=S("div"),r=S("div"),n=S("p"),o=Q("Puzzle "),a=Q(i),c=L(),_&&_.c(),this.h()},l(R){t=y(R,"DIV",{class:!0});var T=g(t);r=y(T,"DIV",{class:!0});var I=g(r);n=y(I,"P",{class:!0});var ve=g(n);o=V(ve,"Puzzle "),a=V(ve,i),ve.forEach(u),I.forEach(u),c=z(T),_&&_.l(T),T.forEach(u),this.h()},h(){l(n,"class","text-lg mx-1"),l(r,"class","flex flex-nowrap"),l(t,"class",h="border-2 rounded-lg m-3 p-2 flex justify-between border-gray-400 dark:border-gray-300 hover:bg-blue-500/40 "+(e[14].current_puzzle==e[55]?"bg-blue-500/25":""))},m(R,T){X(R,t,T),s(t,r),s(r,n),s(n,o),s(n,a),s(t,c),_&&_.m(t,null),p||(P=pe(t,"click",M),p=!0)},p(R,T){e=R,e[2]?_?_.p(e,T):(_=vi(e),_.c(),_.m(t,null)):_&&(_.d(1),_=null),T[0]&16384&&h!==(h="border-2 rounded-lg m-3 p-2 flex justify-between border-gray-400 dark:border-gray-300 hover:bg-blue-500/40 "+(e[14].current_puzzle==e[55]?"bg-blue-500/25":""))&&l(t,"class",h)},d(R){R&&u(t),_&&_.d(),p=!1,P()}}}function mi(e){let t,r,n,o,i;return{c(){t=S("div"),r=S("p"),n=Q("Create New Puzzle"),this.h()},l(a){t=y(a,"DIV",{class:!0});var c=g(t);r=y(c,"P",{class:!0});var h=g(r);n=V(h,"Create New Puzzle"),h.forEach(u),c.forEach(u),this.h()},h(){l(r,"class","text-lg mx-1"),l(t,"class","text-center border-2 rounded-lg m-3 p-2 border-purple-600 text-purple-600 hover:bg-purple-600 hover:text-white")},m(a,c){X(a,t,c),s(t,r),s(r,n),o||(i=pe(t,"click",e[28]),o=!0)},p:st,d(a){a&&u(t),o=!1,i()}}}function Ua(e){let t,r,n,o,i,a,c=e[17].turn()=="w"?"White":"Black",h,p;return{c(){t=S("div"),r=W("svg"),n=W("path"),o=W("path"),i=L(),a=S("p"),h=Q(c),p=Q(" to move and slove the puzzle."),this.h()},l(P){t=y(P,"DIV",{class:!0});var _=g(t);r=x(_,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var M=g(r);n=x(M,"path",{d:!0}),g(n).forEach(u),o=x(M,"path",{d:!0}),g(o).forEach(u),M.forEach(u),_.forEach(u),i=z(P),a=y(P,"P",{});var R=g(a);h=V(R,c),p=V(R," to move and slove the puzzle."),R.forEach(u),this.h()},h(){l(n,"d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"),l(o,"d","M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","55"),l(r,"height","55"),l(r,"fill","currentColor"),l(r,"class","bi bi-question-circle"),l(r,"viewBox","0 0 16 16"),l(t,"class","mr-3")},m(P,_){X(P,t,_),s(t,r),s(r,n),s(r,o),X(P,i,_),X(P,a,_),s(a,h),s(a,p)},p:st,d(P){P&&u(t),P&&u(i),P&&u(a)}}}function qa(e){let t,r,n,o,i,a;return{c(){t=S("div"),r=W("svg"),n=W("path"),o=L(),i=S("p"),a=Q("You did it! Puzzle complete."),this.h()},l(c){t=y(c,"DIV",{class:!0});var h=g(t);r=x(h,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var p=g(r);n=x(p,"path",{d:!0}),g(n).forEach(u),p.forEach(u),h.forEach(u),o=z(c),i=y(c,"P",{});var P=g(i);a=V(P,"You did it! Puzzle complete."),P.forEach(u),this.h()},h(){l(n,"d","M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","55"),l(r,"height","55"),l(r,"fill","currentColor"),l(r,"class","bi bi-star"),l(r,"viewBox","0 0 16 16"),l(t,"class","mr-3")},m(c,h){X(c,t,h),s(t,r),s(r,n),X(c,o,h),X(c,i,h),s(i,a)},p:st,d(c){c&&u(t),c&&u(o),c&&u(i)}}}function Ha(e){let t,r,n,o,i,a,c;return{c(){t=S("div"),r=W("svg"),n=W("path"),o=W("path"),i=L(),a=S("p"),c=Q("Inncorect move, try again."),this.h()},l(h){t=y(h,"DIV",{class:!0});var p=g(t);r=x(p,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var P=g(r);n=x(P,"path",{d:!0}),g(n).forEach(u),o=x(P,"path",{d:!0}),g(o).forEach(u),P.forEach(u),p.forEach(u),i=z(h),a=y(h,"P",{});var _=g(a);c=V(_,"Inncorect move, try again."),_.forEach(u),this.h()},h(){l(n,"d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"),l(o,"d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","55"),l(r,"height","55"),l(r,"fill","currentColor"),l(r,"class","bi bi-x-circle"),l(r,"viewBox","0 0 16 16"),l(t,"class","mr-3")},m(h,p){X(h,t,p),s(t,r),s(r,n),s(r,o),X(h,i,p),X(h,a,p),s(a,c)},p:st,d(h){h&&u(t),h&&u(i),h&&u(a)}}}function Fa(e){let t,r,n,o,i,a,c,h,p=e[14].response+"",P,_;return{c(){t=S("div"),r=W("svg"),n=W("path"),o=W("path"),i=L(),a=S("p"),c=Q("The opponent responds with "),h=S("span"),P=Q(p),_=Q(". What is the next move?"),this.h()},l(M){t=y(M,"DIV",{class:!0});var R=g(t);r=x(R,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var T=g(r);n=x(T,"path",{d:!0}),g(n).forEach(u),o=x(T,"path",{d:!0}),g(o).forEach(u),T.forEach(u),R.forEach(u),i=z(M),a=y(M,"P",{});var I=g(a);c=V(I,"The opponent responds with "),h=y(I,"SPAN",{class:!0});var ve=g(h);P=V(ve,p),ve.forEach(u),_=V(I,". What is the next move?"),I.forEach(u),this.h()},h(){l(n,"d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"),l(o,"d","M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","55"),l(r,"height","55"),l(r,"fill","currentColor"),l(r,"class","bi bi-check-circle"),l(r,"viewBox","0 0 16 16"),l(t,"class","mr-3"),l(h,"class","font-extrabold")},m(M,R){X(M,t,R),s(t,r),s(r,n),s(r,o),X(M,i,R),X(M,a,R),s(a,c),s(a,h),s(h,P),s(a,_)},p(M,R){R[0]&16384&&p!==(p=M[14].response+"")&&Un(P,p)},d(M){M&&u(t),M&&u(i),M&&u(a)}}}function bi(e){let t,r,n,o,i,a,c;return{c(){t=S("div"),r=S("div"),n=W("svg"),o=W("path"),i=L(),a=S("span"),c=Q(e[6]),this.h()},l(h){t=y(h,"DIV",{class:!0});var p=g(t);r=y(p,"DIV",{});var P=g(r);n=x(P,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var _=g(n);o=x(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(o).forEach(u),_.forEach(u),i=z(P),a=y(P,"SPAN",{});var M=g(a);c=V(M,e[6]),M.forEach(u),P.forEach(u),p.forEach(u),this.h()},h(){l(o,"stroke-linecap","round"),l(o,"stroke-linejoin","round"),l(o,"stroke-width","2"),l(o,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),l(n,"xmlns","http://www.w3.org/2000/svg"),l(n,"class","stroke-current flex-shrink-0 h-6 w-6"),l(n,"fill","none"),l(n,"viewBox","0 0 24 24"),l(t,"class","alert alert-warning shadow-lg")},m(h,p){X(h,t,p),s(t,r),s(r,n),s(n,o),s(r,i),s(r,a),s(a,c)},p(h,p){p[0]&64&&Un(c,h[6])},d(h){h&&u(t)}}}function Qa(e){let t;function r(i,a){return i[0]&&i[1]?La:Ka}let n=r(e),o=n(e);return{c(){o.c(),t=Wo()},l(i){o.l(i),t=Wo()},m(i,a){o.m(i,a),X(i,t,a)},p(i,a){n===(n=r(i))&&o?o.p(i,a):(o.d(1),o=n(i),o&&(o.c(),o.m(t.parentNode,t)))},i:st,o:st,d(i){o.d(i),i&&u(t)}}}const Va="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";function ja(e,t,r){let n;el(e,ll,K=>r(47,n=K));let o=null,i=null,a=!1,c=!1,h=!1,p=!1,P=[],_="",M="",R="",T=[],I=800,ve="blue",de="merida",ne="white";const fe=async()=>{const K=await sr("puzzlesets/sets/"+n.params.set+"/");K.ok?K.json().then(D=>{r(1,i=D),i&&r(2,a=o.id==i.creator)}):(alert("Invalid id. This set does not exist, or may have been deleted."),Xo("/dashboard/puzzles")),A(xo(localStorage.getItem("puzzleIndex"))||0)};al.subscribe(K=>{r(0,o=K),o&&!i&&fe()}),tl(()=>{r(9,I=JSON.parse(localStorage.getItem("boardOptions")||"{}").board_size||I),r(10,ve=JSON.parse(localStorage.getItem("boardOptions")||"{}").board_color||ve),r(11,de=JSON.parse(localStorage.getItem("boardOptions")||"{}").piece_set||de)});const Ie=()=>{localStorage.setItem("boardOptions",JSON.stringify({board_size:I,board_color:ve,piece_set:de}))};let $={movable:{free:!1,dests:new Map,events:{after:(K,D,se)=>{}}},fen:R,lastMove:[],orientation:ne},ge;function Ae(K){ge=K,ge.set({fen:R,orientation:ne}),ge.state.movable.dests=f()}let O={state:"starting",response:"",animate:!1,current_puzzle:0};const H=new Dn.Chess;R=Va;const _e=K=>{let D=[{id:0,fen:R,moves:[]}],se=K.split(" "),re=[{fen:R,move:se[0]}],J={ids:[0],max:1};H.load(R);for(let Te in se){let ie=se[Te];if(ie.includes("(")){let Se=H.undo();re.push({fen:H.fen(),move:Se==null?void 0:Se.san}),D.push({id:J.max,fen:H.fen(),moves:[]}),J.ids.push(D[D.length-1].id),J.max++}else ie.includes(".")||(D.filter(Se=>Se.id==J.ids[J.ids.length-1])[0].moves.push(ie.replaceAll(")","")),H.move(ie.replaceAll(")","")));for(let Se=0;Se<ie.split(")").length-1;Se++){let Ne=re.pop();H.load((Ne==null?void 0:Ne.fen)||""),H.move((Ne==null?void 0:Ne.move)||""),J.ids.pop()}}return D},we=K=>{let D=new Dn.Chess;for(let se=0;se<T.length;se++){let re=T[se];D.load(re.fen);for(let J=0;J<re.moves.length;J++)if(D.move(re.moves[J]),!K(re.moves[J],D,[se,J]))return!1}return!0},f=()=>{const K=new Map,D=H.moves({verbose:!0});for(const se of D){const re=K.get(se.from);re?re.push(se.to):K.set(se.from,[se.to])}return K},d=()=>{const K=async()=>{(await sr("puzzlesets/puzzles/",{method:"POST",body:JSON.stringify({in_set:i==null?void 0:i.id,fen:_,correct_variations:M})})).ok?(r(3,c=!1),r(6,P=[]),r(7,_=""),r(8,M=""),await fe(),A((i==null?void 0:i.puzzles.length)-1)):alert("Error sending data to server.")};if(H.validateFen(_).valid){R=_;let D=`[SetUp "1"]
[FEN "`+_+`"]

`+M.split(`
`).reverse()[0];H.loadPgn(D)?(r(8,M=D.split(`
`).reverse()[0].replace(" *","").replaceAll(/ *\{[^)]*\} */g," ")),T=_e(M),K()):r(6,P=["Error loading correct variations, make sure the moves are in the right format."])}else r(6,P=["Invalid Starting Position"])},v=async K=>{(await sr("puzzlesets/puzzles/"+(i==null?void 0:i.puzzles[K].id),{method:"DELETE"})).ok?(ge.set({fen:""}),r(14,O.current_puzzle=0,O),il()):alert("Error deleting puzzle.")},m=async()=>{(await sr("puzzlesets/sets/"+n.params.set+"/",{method:"PATCH",body:JSON.stringify({name:i==null?void 0:i.name})})).ok&&fe()},b=async()=>{(await sr("puzzlesets/sets/"+n.params.set+"/",{method:"DELETE"})).ok&&Xo("/dashboard/puzzles")},A=K=>{const D=i==null?void 0:i.puzzles[K];R=(D==null?void 0:D.fen)||"",T=_e((D==null?void 0:D.correct_variations)||""),H.load(R),r(12,ne=H.turn()=="w"?"white":"black"),r(13,$.movable.dests=f(),$),r(13,$.movable.events.after=k,$),r(14,O.state="start",O),r(14,O.current_puzzle=K,O),localStorage.setItem("puzzleIndex",K)},k=(K,D,se)=>{const re=H.move(K+D,{sloppy:!0}),J=H.fen().split(" ")[0];let Te=[],ie=[],Se=[];we((be,De,[Ht,lt])=>(J==De.fen().split(" ")[0]&&(Te.push(be),ie.push(T[Ht].moves[lt+1]||""),Se.push(T[Ht].moves[lt+2]||"")),!0));let Ne=Te.indexOf((re==null?void 0:re.san)||"");if(Ne>-1){const be=H.move(ie[Ne]);be?(r(14,O.state="correct",O),r(14,O.response=(be==null?void 0:be.san)||"",O),setTimeout(()=>{ge.move(be==null?void 0:be.from,be==null?void 0:be.to),ge.state.movable.dests=f(),ge.playPremove(),Se[Ne]||r(14,O.state="done",O),R=H.fen()},300)):r(14,O.state="done",O)}else r(14,O.state="wrong",O),setTimeout(()=>{let be=H.undo();ge.move(be==null?void 0:be.to,be==null?void 0:be.from),ge.state.lastMove=[],ge.state.movable.dests=f(),R=H.fen(),Ae(ge)},300);r(14,O.animate=!0,O),setTimeout(()=>r(14,O.animate=!1,O),500)},C=K=>{let D=["",""];we((se,re,[J,Te])=>{let ie=re.undo();return R.split(" ")[0]==re.fen().split(" ")[0]?(D=[(ie==null?void 0:ie.from)||"",(ie==null?void 0:ie.to)||""],!1):(re.move((ie==null?void 0:ie.san)||""),!0)}),K?ge.setShapes([{orig:D[0],brush:"green"}]):ge.setShapes([{orig:D[0],dest:D[1],brush:"green"}])},E=()=>r(4,h=!0),N=()=>{b()},G=K=>{v(K)},q=K=>{A(K)},ee=()=>{r(3,c=!0)},Y=()=>C(!0),j=()=>C(!1),Z=()=>{r(12,ne=ne=="white"?"black":"white"),r(13,$.orientation=ne,$)},he=()=>r(5,p=!0);function ae(){c=this.checked,r(3,c)}function oe(){_=this.value,r(7,_)}function te(){M=this.value,r(8,M)}function le(){p=this.checked,r(5,p)}function ze(){de=Go(this),r(11,de)}function ke(){ve=Go(this),r(10,ve)}function Pe(){I=xo(this.value),r(9,I)}function Ce(){h=this.checked,r(4,h)}function Oe(){i.name=this.value,r(1,i)}return[o,i,a,c,h,p,P,_,M,I,ve,de,ne,$,O,Ie,Ae,H,d,v,m,b,A,C,E,N,G,q,ee,Y,j,Z,he,ae,oe,te,le,ze,ke,Pe,Ce,Oe,()=>{m()},()=>{window.open("mailto: ?cc=, &bcc= &subject=Link to Puzzle Set on Chess Path&body="+window.location.href)}]}class Ja extends Ji{constructor(t){super(),Xi(this,t,ja,Qa,$i,{},null,[-1,-1])}}export{Ja as default};
